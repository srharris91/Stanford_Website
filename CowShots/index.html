<!DOCTYPE html>
<html>
<title>Shaun's Personal Website</title>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
</style>
<body>

<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-theme w3-top w3-left-align w3-large">
    <a class="w3-bar-item w3-button w3-right w3-hide-large w3-hover-white w3-large w3-theme-l1" href="javascript:void(0)" onclick="w3_open()"><i class="fa fa-bars"></i></a>
    <a href="index" class="w3-bar-item w3-button w3-theme-l1">Home</a>
    <a href="MechanicalSystem" class="w3-bar-item w3-button w3-hover-white">MechanicalSystem</a>
    <a href="Electrical" class="w3-bar-item w3-button w3-hover-white">Electrical</a>
    <a href="Software" class="w3-bar-item w3-button w3-hover-white">Software</a>
    <a href="PreliminaryTestResults" class="w3-bar-item w3-button w3-hover-white">PreliminaryTestResults</a>
    <a href="DesignModifications" class="w3-bar-item w3-button w3-hover-white">DesignModifications</a>
  </div>
</div>

<!-- Sidebar -->
<nav class="w3-sidebar w3-bar-block w3-collapse w3-large w3-theme-l5 w3-animate-left" id="mySidebar">
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-right w3-xlarge w3-padding-large w3-hover-black w3-hide-large" title="Close Menu">
    <i class="fa fa-remove"></i>
  </a>
  <h4 class="w3-bar-item"><b>Menu</b></h4>
  <a class="w3-bar-item w3-button w3-hover-black" href="index">Home</a>
  <a class="w3-bar-item w3-button w3-hover-black" href="Electrical">Electrical</a>
  <a class="w3-bar-item w3-button w3-hover-black" href="Software">Software</a>
  <a class="w3-bar-item w3-button w3-hover-black" href="PreliminaryTestResults">PreliminaryTestResults</a>
  <a class="w3-bar-item w3-button w3-hover-black" href="DesignModifications">DesignModifications</a>
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div class="w3-main" style="margin-left:250px">





<div class="w3-row w3-padding-64">
    <h1 class="w3-text-teal">CowShots Robot Complete Final Report</h1>
    <div class="w3-rest w3-container">
<head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_uh3o6z9stu0g-4>li{counter-increment:lst-ctn-kix_uh3o6z9stu0g-4}.lst-kix_irujjs1zrbxa-5>li{counter-increment:lst-ctn-kix_irujjs1zrbxa-5}ol.lst-kix_uh3o6z9stu0g-4.start{counter-reset:lst-ctn-kix_uh3o6z9stu0g-4 0}ol.lst-kix_irujjs1zrbxa-8{list-style-type:none}ol.lst-kix_irujjs1zrbxa-7{list-style-type:none}ol.lst-kix_irujjs1zrbxa-6{list-style-type:none}.lst-kix_m11dh2ntseu5-1>li{counter-increment:lst-ctn-kix_m11dh2ntseu5-1}ol.lst-kix_irujjs1zrbxa-5{list-style-type:none}ol.lst-kix_irujjs1zrbxa-4{list-style-type:none}ol.lst-kix_irujjs1zrbxa-3{list-style-type:none}ol.lst-kix_irujjs1zrbxa-2{list-style-type:none}ol.lst-kix_irujjs1zrbxa-1{list-style-type:none}ol.lst-kix_irujjs1zrbxa-0{list-style-type:none}ol.lst-kix_m11dh2ntseu5-0{list-style-type:none}ol.lst-kix_m11dh2ntseu5-1{list-style-type:none}.lst-kix_ys2y86ka8ojv-0>li:before{content:"-  "}ol.lst-kix_m11dh2ntseu5-4{list-style-type:none}ol.lst-kix_m11dh2ntseu5-5{list-style-type:none}.lst-kix_ys2y86ka8ojv-1>li:before{content:"-  "}.lst-kix_ys2y86ka8ojv-2>li:before{content:"-  "}ol.lst-kix_m11dh2ntseu5-2{list-style-type:none}ol.lst-kix_m11dh2ntseu5-3{list-style-type:none}ol.lst-kix_m11dh2ntseu5-8{list-style-type:none}ol.lst-kix_irujjs1zrbxa-0.start{counter-reset:lst-ctn-kix_irujjs1zrbxa-0 0}ol.lst-kix_m11dh2ntseu5-6{list-style-type:none}ol.lst-kix_m11dh2ntseu5-7{list-style-type:none}.lst-kix_3sq4fitor948-5>li{counter-increment:lst-ctn-kix_3sq4fitor948-5}ol.lst-kix_vt9vab83cwkg-1.start{counter-reset:lst-ctn-kix_vt9vab83cwkg-1 0}ul.lst-kix_ys2y86ka8ojv-0{list-style-type:none}ul.lst-kix_ys2y86ka8ojv-4{list-style-type:none}ul.lst-kix_ys2y86ka8ojv-3{list-style-type:none}ul.lst-kix_ys2y86ka8ojv-2{list-style-type:none}ul.lst-kix_ys2y86ka8ojv-1{list-style-type:none}ul.lst-kix_ys2y86ka8ojv-8{list-style-type:none}ul.lst-kix_ys2y86ka8ojv-7{list-style-type:none}ul.lst-kix_ys2y86ka8ojv-6{list-style-type:none}ul.lst-kix_ys2y86ka8ojv-5{list-style-type:none}.lst-kix_r2tywxf6y60t-3>li:before{content:"(" counter(lst-ctn-kix_r2tywxf6y60t-3,lower-latin) ") "}ol.lst-kix_m11dh2ntseu5-3.start{counter-reset:lst-ctn-kix_m11dh2ntseu5-3 0}.lst-kix_r2tywxf6y60t-0>li:before{content:"" counter(lst-ctn-kix_r2tywxf6y60t-0,lower-latin) ") "}.lst-kix_r2tywxf6y60t-4>li:before{content:"(" counter(lst-ctn-kix_r2tywxf6y60t-4,lower-roman) ") "}ol.lst-kix_3sq4fitor948-3.start{counter-reset:lst-ctn-kix_3sq4fitor948-3 0}.lst-kix_r2tywxf6y60t-1>li:before{content:"" counter(lst-ctn-kix_r2tywxf6y60t-1,lower-roman) ") "}.lst-kix_r2tywxf6y60t-2>li:before{content:"" counter(lst-ctn-kix_r2tywxf6y60t-2,decimal) ") "}.lst-kix_vnzhaq4mkbr3-0>li:before{content:"\0025cf  "}.lst-kix_vnzhaq4mkbr3-1>li:before{content:"\0025cb  "}.lst-kix_r2tywxf6y60t-5>li{counter-increment:lst-ctn-kix_r2tywxf6y60t-5}.lst-kix_vnzhaq4mkbr3-2>li:before{content:"\0025a0  "}.lst-kix_vnzhaq4mkbr3-3>li:before{content:"\0025cf  "}ol.lst-kix_uh3o6z9stu0g-2{list-style-type:none}ol.lst-kix_uh3o6z9stu0g-3{list-style-type:none}ol.lst-kix_uh3o6z9stu0g-4{list-style-type:none}ol.lst-kix_uh3o6z9stu0g-5{list-style-type:none}ol.lst-kix_uh3o6z9stu0g-6{list-style-type:none}.lst-kix_u5i3t61dchl3-4>li:before{content:"-  "}.lst-kix_vt9vab83cwkg-6>li{counter-increment:lst-ctn-kix_vt9vab83cwkg-6}ol.lst-kix_uh3o6z9stu0g-7{list-style-type:none}ol.lst-kix_uh3o6z9stu0g-8{list-style-type:none}.lst-kix_u5i3t61dchl3-2>li:before{content:"-  "}.lst-kix_u5i3t61dchl3-3>li:before{content:"-  "}ul.lst-kix_cg819uslwku6-0{list-style-type:none}ul.lst-kix_cg819uslwku6-1{list-style-type:none}.lst-kix_u5i3t61dchl3-1>li:before{content:"-  "}ol.lst-kix_3sq4fitor948-4.start{counter-reset:lst-ctn-kix_3sq4fitor948-4 0}.lst-kix_m11dh2ntseu5-5>li{counter-increment:lst-ctn-kix_m11dh2ntseu5-5}ul.lst-kix_cg819uslwku6-4{list-style-type:none}ul.lst-kix_cg819uslwku6-5{list-style-type:none}ul.lst-kix_cg819uslwku6-2{list-style-type:none}ul.lst-kix_cg819uslwku6-3{list-style-type:none}ul.lst-kix_cg819uslwku6-8{list-style-type:none}.lst-kix_u5i3t61dchl3-0>li:before{content:"-  "}ul.lst-kix_cg819uslwku6-6{list-style-type:none}.lst-kix_vt9vab83cwkg-2>li{counter-increment:lst-ctn-kix_vt9vab83cwkg-2}ul.lst-kix_cg819uslwku6-7{list-style-type:none}.lst-kix_ys2y86ka8ojv-7>li:before{content:"-  "}.lst-kix_ys2y86ka8ojv-8>li:before{content:"-  "}.lst-kix_ys2y86ka8ojv-5>li:before{content:"-  "}.lst-kix_ys2y86ka8ojv-6>li:before{content:"-  "}.lst-kix_irujjs1zrbxa-3>li{counter-increment:lst-ctn-kix_irujjs1zrbxa-3}.lst-kix_ys2y86ka8ojv-3>li:before{content:"-  "}.lst-kix_ys2y86ka8ojv-4>li:before{content:"-  "}.lst-kix_3sq4fitor948-1>li{counter-increment:lst-ctn-kix_3sq4fitor948-1}.lst-kix_vnzhaq4mkbr3-8>li:before{content:"\0025a0  "}.lst-kix_vnzhaq4mkbr3-6>li:before{content:"\0025cf  "}.lst-kix_vnzhaq4mkbr3-7>li:before{content:"\0025cb  "}ol.lst-kix_uh3o6z9stu0g-0{list-style-type:none}ol.lst-kix_uh3o6z9stu0g-1{list-style-type:none}.lst-kix_3sq4fitor948-7>li{counter-increment:lst-ctn-kix_3sq4fitor948-7}ol.lst-kix_m11dh2ntseu5-8.start{counter-reset:lst-ctn-kix_m11dh2ntseu5-8 0}.lst-kix_vnzhaq4mkbr3-4>li:before{content:"\0025cb  "}.lst-kix_vnzhaq4mkbr3-5>li:before{content:"\0025a0  "}ol.lst-kix_uh3o6z9stu0g-3.start{counter-reset:lst-ctn-kix_uh3o6z9stu0g-3 0}ul.lst-kix_wv3vg5bs8d4v-1{list-style-type:none}ul.lst-kix_wv3vg5bs8d4v-0{list-style-type:none}ol.lst-kix_irujjs1zrbxa-7.start{counter-reset:lst-ctn-kix_irujjs1zrbxa-7 0}.lst-kix_m11dh2ntseu5-7>li{counter-increment:lst-ctn-kix_m11dh2ntseu5-7}.lst-kix_3sq4fitor948-3>li:before{content:"(" counter(lst-ctn-kix_3sq4fitor948-3,lower-latin) ") "}.lst-kix_irujjs1zrbxa-0>li{counter-increment:lst-ctn-kix_irujjs1zrbxa-0}ul.lst-kix_wv3vg5bs8d4v-7{list-style-type:none}.lst-kix_3sq4fitor948-1>li:before{content:"" counter(lst-ctn-kix_3sq4fitor948-1,lower-roman) ") "}ul.lst-kix_wv3vg5bs8d4v-6{list-style-type:none}.lst-kix_r2tywxf6y60t-2>li{counter-increment:lst-ctn-kix_r2tywxf6y60t-2}ul.lst-kix_wv3vg5bs8d4v-8{list-style-type:none}ul.lst-kix_wv3vg5bs8d4v-3{list-style-type:none}ul.lst-kix_wv3vg5bs8d4v-2{list-style-type:none}ul.lst-kix_wv3vg5bs8d4v-5{list-style-type:none}ul.lst-kix_wv3vg5bs8d4v-4{list-style-type:none}.lst-kix_uh3o6z9stu0g-8>li{counter-increment:lst-ctn-kix_uh3o6z9stu0g-8}ol.lst-kix_r2tywxf6y60t-8.start{counter-reset:lst-ctn-kix_r2tywxf6y60t-8 0}ol.lst-kix_uh3o6z9stu0g-5.start{counter-reset:lst-ctn-kix_uh3o6z9stu0g-5 0}ol.lst-kix_uh3o6z9stu0g-8.start{counter-reset:lst-ctn-kix_uh3o6z9stu0g-8 0}ol.lst-kix_irujjs1zrbxa-4.start{counter-reset:lst-ctn-kix_irujjs1zrbxa-4 0}.lst-kix_r2tywxf6y60t-0>li{counter-increment:lst-ctn-kix_r2tywxf6y60t-0}.lst-kix_u5i3t61dchl3-5>li:before{content:"-  "}.lst-kix_vt9vab83cwkg-7>li:before{content:"" counter(lst-ctn-kix_vt9vab83cwkg-7,lower-roman) ". "}ol.lst-kix_vt9vab83cwkg-2.start{counter-reset:lst-ctn-kix_vt9vab83cwkg-2 0}.lst-kix_u5i3t61dchl3-7>li:before{content:"-  "}.lst-kix_vt9vab83cwkg-5>li:before{content:"(" counter(lst-ctn-kix_vt9vab83cwkg-5,decimal) ") "}.lst-kix_3sq4fitor948-3>li{counter-increment:lst-ctn-kix_3sq4fitor948-3}ol.lst-kix_3sq4fitor948-1.start{counter-reset:lst-ctn-kix_3sq4fitor948-1 0}.lst-kix_irujjs1zrbxa-8>li{counter-increment:lst-ctn-kix_irujjs1zrbxa-8}.lst-kix_vt9vab83cwkg-3>li:before{content:"(" counter(lst-ctn-kix_vt9vab83cwkg-3,lower-latin) ") "}ol.lst-kix_uh3o6z9stu0g-6.start{counter-reset:lst-ctn-kix_uh3o6z9stu0g-6 0}.lst-kix_r2tywxf6y60t-7>li:before{content:"" counter(lst-ctn-kix_r2tywxf6y60t-7,lower-roman) ". "}.lst-kix_r2tywxf6y60t-5>li:before{content:"(" counter(lst-ctn-kix_r2tywxf6y60t-5,decimal) ") "}.lst-kix_vt9vab83cwkg-1>li:before{content:"" counter(lst-ctn-kix_vt9vab83cwkg-1,lower-roman) ") "}.lst-kix_irujjs1zrbxa-7>li{counter-increment:lst-ctn-kix_irujjs1zrbxa-7}.lst-kix_irujjs1zrbxa-1>li{counter-increment:lst-ctn-kix_irujjs1zrbxa-1}ol.lst-kix_irujjs1zrbxa-5.start{counter-reset:lst-ctn-kix_irujjs1zrbxa-5 0}.lst-kix_3sq4fitor948-8>li{counter-increment:lst-ctn-kix_3sq4fitor948-8}.lst-kix_uh3o6z9stu0g-8>li:before{content:"" counter(lst-ctn-kix_uh3o6z9stu0g-8,lower-roman) ". "}.lst-kix_uh3o6z9stu0g-2>li{counter-increment:lst-ctn-kix_uh3o6z9stu0g-2}.lst-kix_3sq4fitor948-2>li{counter-increment:lst-ctn-kix_3sq4fitor948-2}.lst-kix_m11dh2ntseu5-1>li:before{content:"" counter(lst-ctn-kix_m11dh2ntseu5-1,lower-latin) ". "}.lst-kix_h5ns76arci40-7>li:before{content:"\0025cb  "}.lst-kix_uh3o6z9stu0g-4>li:before{content:"" counter(lst-ctn-kix_uh3o6z9stu0g-4,lower-latin) ". "}.lst-kix_m11dh2ntseu5-0>li{counter-increment:lst-ctn-kix_m11dh2ntseu5-0}.lst-kix_r2tywxf6y60t-1>li{counter-increment:lst-ctn-kix_r2tywxf6y60t-1}ol.lst-kix_3sq4fitor948-2.start{counter-reset:lst-ctn-kix_3sq4fitor948-2 0}.lst-kix_uh3o6z9stu0g-2>li:before{content:"" counter(lst-ctn-kix_uh3o6z9stu0g-2,lower-roman) ". "}.lst-kix_uh3o6z9stu0g-6>li:before{content:"" counter(lst-ctn-kix_uh3o6z9stu0g-6,decimal) ". "}ol.lst-kix_irujjs1zrbxa-6.start{counter-reset:lst-ctn-kix_irujjs1zrbxa-6 0}.lst-kix_m11dh2ntseu5-7>li:before{content:"" counter(lst-ctn-kix_m11dh2ntseu5-7,lower-latin) ". "}.lst-kix_h5ns76arci40-5>li:before{content:"\0025a0  "}.lst-kix_3sq4fitor948-5>li:before{content:"(" counter(lst-ctn-kix_3sq4fitor948-5,decimal) ") "}ol.lst-kix_vt9vab83cwkg-0.start{counter-reset:lst-ctn-kix_vt9vab83cwkg-0 0}.lst-kix_vt9vab83cwkg-4>li{counter-increment:lst-ctn-kix_vt9vab83cwkg-4}.lst-kix_m11dh2ntseu5-5>li:before{content:"" counter(lst-ctn-kix_m11dh2ntseu5-5,lower-roman) ". "}.lst-kix_h5ns76arci40-3>li:before{content:"\0025cf  "}.lst-kix_r2tywxf6y60t-7>li{counter-increment:lst-ctn-kix_r2tywxf6y60t-7}.lst-kix_uh3o6z9stu0g-0>li:before{content:"" counter(lst-ctn-kix_uh3o6z9stu0g-0,decimal) ". "}.lst-kix_m11dh2ntseu5-6>li{counter-increment:lst-ctn-kix_m11dh2ntseu5-6}.lst-kix_3sq4fitor948-7>li:before{content:"" counter(lst-ctn-kix_3sq4fitor948-7,lower-roman) ". "}.lst-kix_m11dh2ntseu5-3>li:before{content:"" counter(lst-ctn-kix_m11dh2ntseu5-3,decimal) ". "}.lst-kix_h5ns76arci40-1>li:before{content:"\0025cb  "}ol.lst-kix_3sq4fitor948-6.start{counter-reset:lst-ctn-kix_3sq4fitor948-6 0}.lst-kix_vt9vab83cwkg-3>li{counter-increment:lst-ctn-kix_vt9vab83cwkg-3}ol.lst-kix_uh3o6z9stu0g-1.start{counter-reset:lst-ctn-kix_uh3o6z9stu0g-1 0}.lst-kix_r2tywxf6y60t-8>li{counter-increment:lst-ctn-kix_r2tywxf6y60t-8}.lst-kix_3sq4fitor948-6>li{counter-increment:lst-ctn-kix_3sq4fitor948-6}.lst-kix_m11dh2ntseu5-2>li{counter-increment:lst-ctn-kix_m11dh2ntseu5-2}.lst-kix_irujjs1zrbxa-4>li{counter-increment:lst-ctn-kix_irujjs1zrbxa-4}ol.lst-kix_irujjs1zrbxa-3.start{counter-reset:lst-ctn-kix_irujjs1zrbxa-3 0}ol.lst-kix_r2tywxf6y60t-6.start{counter-reset:lst-ctn-kix_r2tywxf6y60t-6 0}ol.lst-kix_uh3o6z9stu0g-7.start{counter-reset:lst-ctn-kix_uh3o6z9stu0g-7 0}.lst-kix_vt9vab83cwkg-5>li{counter-increment:lst-ctn-kix_vt9vab83cwkg-5}.lst-kix_wv3vg5bs8d4v-6>li:before{content:"\0025cf  "}.lst-kix_wv3vg5bs8d4v-7>li:before{content:"\0025cb  "}.lst-kix_wv3vg5bs8d4v-5>li:before{content:"\0025a0  "}ol.lst-kix_m11dh2ntseu5-6.start{counter-reset:lst-ctn-kix_m11dh2ntseu5-6 0}.lst-kix_uh3o6z9stu0g-5>li{counter-increment:lst-ctn-kix_uh3o6z9stu0g-5}ol.lst-kix_3sq4fitor948-0.start{counter-reset:lst-ctn-kix_3sq4fitor948-0 0}.lst-kix_uh3o6z9stu0g-3>li{counter-increment:lst-ctn-kix_uh3o6z9stu0g-3}.lst-kix_wv3vg5bs8d4v-8>li:before{content:"\0025a0  "}.lst-kix_irujjs1zrbxa-7>li:before{content:"" counter(lst-ctn-kix_irujjs1zrbxa-7,lower-latin) ". "}.lst-kix_irujjs1zrbxa-2>li{counter-increment:lst-ctn-kix_irujjs1zrbxa-2}.lst-kix_irujjs1zrbxa-8>li:before{content:"" counter(lst-ctn-kix_irujjs1zrbxa-8,lower-roman) ". "}ul.lst-kix_h5ns76arci40-7{list-style-type:none}ul.lst-kix_h5ns76arci40-8{list-style-type:none}ul.lst-kix_h5ns76arci40-5{list-style-type:none}ol.lst-kix_irujjs1zrbxa-2.start{counter-reset:lst-ctn-kix_irujjs1zrbxa-2 0}ol.lst-kix_m11dh2ntseu5-0.start{counter-reset:lst-ctn-kix_m11dh2ntseu5-0 0}ul.lst-kix_h5ns76arci40-6{list-style-type:none}ol.lst-kix_vt9vab83cwkg-3.start{counter-reset:lst-ctn-kix_vt9vab83cwkg-3 0}.lst-kix_uh3o6z9stu0g-1>li{counter-increment:lst-ctn-kix_uh3o6z9stu0g-1}.lst-kix_irujjs1zrbxa-6>li:before{content:"" counter(lst-ctn-kix_irujjs1zrbxa-6,decimal) ". "}ul.lst-kix_h5ns76arci40-0{list-style-type:none}.lst-kix_irujjs1zrbxa-5>li:before{content:"" counter(lst-ctn-kix_irujjs1zrbxa-5,lower-roman) ". "}.lst-kix_m11dh2ntseu5-4>li{counter-increment:lst-ctn-kix_m11dh2ntseu5-4}.lst-kix_irujjs1zrbxa-4>li:before{content:"" counter(lst-ctn-kix_irujjs1zrbxa-4,lower-latin) ". "}ul.lst-kix_h5ns76arci40-3{list-style-type:none}ul.lst-kix_h5ns76arci40-4{list-style-type:none}ul.lst-kix_h5ns76arci40-1{list-style-type:none}ul.lst-kix_h5ns76arci40-2{list-style-type:none}.lst-kix_irujjs1zrbxa-2>li:before{content:"" counter(lst-ctn-kix_irujjs1zrbxa-2,lower-roman) ". "}.lst-kix_r2tywxf6y60t-6>li{counter-increment:lst-ctn-kix_r2tywxf6y60t-6}.lst-kix_irujjs1zrbxa-1>li:before{content:"" counter(lst-ctn-kix_irujjs1zrbxa-1,lower-latin) ". "}.lst-kix_irujjs1zrbxa-3>li:before{content:"" counter(lst-ctn-kix_irujjs1zrbxa-3,decimal) ". "}ol.lst-kix_r2tywxf6y60t-1.start{counter-reset:lst-ctn-kix_r2tywxf6y60t-1 0}ol.lst-kix_uh3o6z9stu0g-2.start{counter-reset:lst-ctn-kix_uh3o6z9stu0g-2 0}.lst-kix_cg819uslwku6-8>li:before{content:"\0025a0  "}.lst-kix_wv3vg5bs8d4v-1>li:before{content:"\0025cb  "}.lst-kix_cg819uslwku6-7>li:before{content:"\0025cb  "}.lst-kix_wv3vg5bs8d4v-2>li:before{content:"\0025a0  "}.lst-kix_cg819uslwku6-6>li:before{content:"\0025cf  "}.lst-kix_wv3vg5bs8d4v-3>li:before{content:"\0025cf  "}.lst-kix_irujjs1zrbxa-0>li:before{content:"" counter(lst-ctn-kix_irujjs1zrbxa-0,decimal) ". "}ol.lst-kix_m11dh2ntseu5-7.start{counter-reset:lst-ctn-kix_m11dh2ntseu5-7 0}.lst-kix_wv3vg5bs8d4v-4>li:before{content:"\0025cb  "}.lst-kix_cg819uslwku6-5>li:before{content:"\0025a0  "}ol.lst-kix_irujjs1zrbxa-8.start{counter-reset:lst-ctn-kix_irujjs1zrbxa-8 0}.lst-kix_cg819uslwku6-2>li:before{content:"\0025a0  "}ol.lst-kix_vt9vab83cwkg-4.start{counter-reset:lst-ctn-kix_vt9vab83cwkg-4 0}ol.lst-kix_r2tywxf6y60t-8{list-style-type:none}.lst-kix_cg819uslwku6-0>li:before{content:"\0025cf  "}.lst-kix_cg819uslwku6-4>li:before{content:"\0025cb  "}.lst-kix_cg819uslwku6-3>li:before{content:"\0025cf  "}ol.lst-kix_r2tywxf6y60t-3{list-style-type:none}ul.lst-kix_u5i3t61dchl3-2{list-style-type:none}ol.lst-kix_r2tywxf6y60t-2{list-style-type:none}ul.lst-kix_u5i3t61dchl3-3{list-style-type:none}ol.lst-kix_r2tywxf6y60t-1{list-style-type:none}ul.lst-kix_u5i3t61dchl3-4{list-style-type:none}ol.lst-kix_r2tywxf6y60t-0{list-style-type:none}ol.lst-kix_m11dh2ntseu5-1.start{counter-reset:lst-ctn-kix_m11dh2ntseu5-1 0}ul.lst-kix_u5i3t61dchl3-5{list-style-type:none}ol.lst-kix_r2tywxf6y60t-7{list-style-type:none}ol.lst-kix_r2tywxf6y60t-6{list-style-type:none}.lst-kix_cg819uslwku6-1>li:before{content:"\0025cb  "}.lst-kix_wv3vg5bs8d4v-0>li:before{content:"\0025cf  "}.lst-kix_irujjs1zrbxa-6>li{counter-increment:lst-ctn-kix_irujjs1zrbxa-6}ol.lst-kix_r2tywxf6y60t-5{list-style-type:none}ul.lst-kix_u5i3t61dchl3-0{list-style-type:none}ol.lst-kix_r2tywxf6y60t-4{list-style-type:none}ol.lst-kix_3sq4fitor948-5.start{counter-reset:lst-ctn-kix_3sq4fitor948-5 0}ul.lst-kix_u5i3t61dchl3-1{list-style-type:none}ol.lst-kix_r2tywxf6y60t-0.start{counter-reset:lst-ctn-kix_r2tywxf6y60t-0 0}ul.lst-kix_u5i3t61dchl3-6{list-style-type:none}ul.lst-kix_u5i3t61dchl3-7{list-style-type:none}.lst-kix_3sq4fitor948-4>li{counter-increment:lst-ctn-kix_3sq4fitor948-4}ul.lst-kix_u5i3t61dchl3-8{list-style-type:none}ol.lst-kix_r2tywxf6y60t-7.start{counter-reset:lst-ctn-kix_r2tywxf6y60t-7 0}.lst-kix_uh3o6z9stu0g-7>li{counter-increment:lst-ctn-kix_uh3o6z9stu0g-7}.lst-kix_3sq4fitor948-0>li{counter-increment:lst-ctn-kix_3sq4fitor948-0}ol.lst-kix_m11dh2ntseu5-5.start{counter-reset:lst-ctn-kix_m11dh2ntseu5-5 0}ol.lst-kix_vt9vab83cwkg-8.start{counter-reset:lst-ctn-kix_vt9vab83cwkg-8 0}.lst-kix_r2tywxf6y60t-3>li{counter-increment:lst-ctn-kix_r2tywxf6y60t-3}ol.lst-kix_3sq4fitor948-7{list-style-type:none}ul.lst-kix_vnzhaq4mkbr3-0{list-style-type:none}ol.lst-kix_3sq4fitor948-8{list-style-type:none}ul.lst-kix_vnzhaq4mkbr3-1{list-style-type:none}.lst-kix_m11dh2ntseu5-8>li{counter-increment:lst-ctn-kix_m11dh2ntseu5-8}ol.lst-kix_3sq4fitor948-3{list-style-type:none}ol.lst-kix_3sq4fitor948-4{list-style-type:none}.lst-kix_3sq4fitor948-2>li:before{content:"" counter(lst-ctn-kix_3sq4fitor948-2,decimal) ") "}ol.lst-kix_3sq4fitor948-5{list-style-type:none}ol.lst-kix_3sq4fitor948-6{list-style-type:none}ul.lst-kix_vnzhaq4mkbr3-8{list-style-type:none}ol.lst-kix_3sq4fitor948-0{list-style-type:none}ol.lst-kix_m11dh2ntseu5-2.start{counter-reset:lst-ctn-kix_m11dh2ntseu5-2 0}ol.lst-kix_3sq4fitor948-1{list-style-type:none}ul.lst-kix_vnzhaq4mkbr3-6{list-style-type:none}ol.lst-kix_3sq4fitor948-2{list-style-type:none}ul.lst-kix_vnzhaq4mkbr3-7{list-style-type:none}ul.lst-kix_vnzhaq4mkbr3-4{list-style-type:none}ol.lst-kix_3sq4fitor948-7.start{counter-reset:lst-ctn-kix_3sq4fitor948-7 0}ul.lst-kix_vnzhaq4mkbr3-5{list-style-type:none}.lst-kix_3sq4fitor948-0>li:before{content:"" counter(lst-ctn-kix_3sq4fitor948-0,lower-latin) ") "}ul.lst-kix_vnzhaq4mkbr3-2{list-style-type:none}ul.lst-kix_vnzhaq4mkbr3-3{list-style-type:none}ol.lst-kix_vt9vab83cwkg-5{list-style-type:none}ol.lst-kix_vt9vab83cwkg-4{list-style-type:none}.lst-kix_vt9vab83cwkg-8>li{counter-increment:lst-ctn-kix_vt9vab83cwkg-8}ol.lst-kix_irujjs1zrbxa-1.start{counter-reset:lst-ctn-kix_irujjs1zrbxa-1 0}ol.lst-kix_vt9vab83cwkg-7{list-style-type:none}ol.lst-kix_vt9vab83cwkg-6{list-style-type:none}ol.lst-kix_vt9vab83cwkg-1{list-style-type:none}ol.lst-kix_vt9vab83cwkg-0{list-style-type:none}ol.lst-kix_vt9vab83cwkg-3{list-style-type:none}ol.lst-kix_vt9vab83cwkg-2{list-style-type:none}.lst-kix_uh3o6z9stu0g-0>li{counter-increment:lst-ctn-kix_uh3o6z9stu0g-0}ol.lst-kix_vt9vab83cwkg-8{list-style-type:none}.lst-kix_vt9vab83cwkg-8>li:before{content:"" counter(lst-ctn-kix_vt9vab83cwkg-8,decimal) ". "}.lst-kix_vt9vab83cwkg-0>li{counter-increment:lst-ctn-kix_vt9vab83cwkg-0}ol.lst-kix_vt9vab83cwkg-5.start{counter-reset:lst-ctn-kix_vt9vab83cwkg-5 0}ol.lst-kix_r2tywxf6y60t-5.start{counter-reset:lst-ctn-kix_r2tywxf6y60t-5 0}.lst-kix_u5i3t61dchl3-6>li:before{content:"-  "}ol.lst-kix_r2tywxf6y60t-2.start{counter-reset:lst-ctn-kix_r2tywxf6y60t-2 0}.lst-kix_vt9vab83cwkg-4>li:before{content:"(" counter(lst-ctn-kix_vt9vab83cwkg-4,lower-roman) ") "}.lst-kix_vt9vab83cwkg-6>li:before{content:"" counter(lst-ctn-kix_vt9vab83cwkg-6,lower-latin) ". "}.lst-kix_u5i3t61dchl3-8>li:before{content:"-  "}ol.lst-kix_r2tywxf6y60t-4.start{counter-reset:lst-ctn-kix_r2tywxf6y60t-4 0}.lst-kix_vt9vab83cwkg-0>li:before{content:"" counter(lst-ctn-kix_vt9vab83cwkg-0,lower-latin) ") "}.lst-kix_vt9vab83cwkg-2>li:before{content:"" counter(lst-ctn-kix_vt9vab83cwkg-2,decimal) ") "}ol.lst-kix_3sq4fitor948-8.start{counter-reset:lst-ctn-kix_3sq4fitor948-8 0}.lst-kix_r2tywxf6y60t-8>li:before{content:"" counter(lst-ctn-kix_r2tywxf6y60t-8,decimal) ". "}.lst-kix_vt9vab83cwkg-1>li{counter-increment:lst-ctn-kix_vt9vab83cwkg-1}.lst-kix_r2tywxf6y60t-6>li:before{content:"" counter(lst-ctn-kix_r2tywxf6y60t-6,lower-latin) ". "}.lst-kix_uh3o6z9stu0g-6>li{counter-increment:lst-ctn-kix_uh3o6z9stu0g-6}ol.lst-kix_m11dh2ntseu5-4.start{counter-reset:lst-ctn-kix_m11dh2ntseu5-4 0}ol.lst-kix_vt9vab83cwkg-6.start{counter-reset:lst-ctn-kix_vt9vab83cwkg-6 0}.lst-kix_uh3o6z9stu0g-7>li:before{content:"" counter(lst-ctn-kix_uh3o6z9stu0g-7,lower-latin) ". "}.lst-kix_uh3o6z9stu0g-5>li:before{content:"" counter(lst-ctn-kix_uh3o6z9stu0g-5,lower-roman) ". "}.lst-kix_h5ns76arci40-6>li:before{content:"\0025cf  "}.lst-kix_h5ns76arci40-8>li:before{content:"\0025a0  "}ol.lst-kix_r2tywxf6y60t-3.start{counter-reset:lst-ctn-kix_r2tywxf6y60t-3 0}.lst-kix_m11dh2ntseu5-2>li:before{content:"" counter(lst-ctn-kix_m11dh2ntseu5-2,lower-roman) ". "}.lst-kix_h5ns76arci40-4>li:before{content:"\0025cb  "}ol.lst-kix_uh3o6z9stu0g-0.start{counter-reset:lst-ctn-kix_uh3o6z9stu0g-0 0}.lst-kix_uh3o6z9stu0g-3>li:before{content:"" counter(lst-ctn-kix_uh3o6z9stu0g-3,decimal) ". "}.lst-kix_m11dh2ntseu5-0>li:before{content:"" counter(lst-ctn-kix_m11dh2ntseu5-0,decimal) ". "}.lst-kix_m11dh2ntseu5-8>li:before{content:"" counter(lst-ctn-kix_m11dh2ntseu5-8,lower-roman) ". "}.lst-kix_3sq4fitor948-4>li:before{content:"(" counter(lst-ctn-kix_3sq4fitor948-4,lower-roman) ") "}.lst-kix_h5ns76arci40-0>li:before{content:"\0025cf  "}.lst-kix_m11dh2ntseu5-6>li:before{content:"" counter(lst-ctn-kix_m11dh2ntseu5-6,decimal) ". "}ol.lst-kix_vt9vab83cwkg-7.start{counter-reset:lst-ctn-kix_vt9vab83cwkg-7 0}.lst-kix_3sq4fitor948-6>li:before{content:"" counter(lst-ctn-kix_3sq4fitor948-6,lower-latin) ". "}.lst-kix_uh3o6z9stu0g-1>li:before{content:"" counter(lst-ctn-kix_uh3o6z9stu0g-1,lower-latin) ". "}.lst-kix_r2tywxf6y60t-4>li{counter-increment:lst-ctn-kix_r2tywxf6y60t-4}.lst-kix_h5ns76arci40-2>li:before{content:"\0025a0  "}.lst-kix_vt9vab83cwkg-7>li{counter-increment:lst-ctn-kix_vt9vab83cwkg-7}.lst-kix_m11dh2ntseu5-4>li:before{content:"" counter(lst-ctn-kix_m11dh2ntseu5-4,lower-latin) ". "}.lst-kix_m11dh2ntseu5-3>li{counter-increment:lst-ctn-kix_m11dh2ntseu5-3}.lst-kix_3sq4fitor948-8>li:before{content:"" counter(lst-ctn-kix_3sq4fitor948-8,decimal) ". "}ol{margin:0;padding:0}table td,table th{padding:0}.c4{border-right-style:solid;padding:2pt 2pt 2pt 2pt;border-bottom-color:#cccccc;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:bottom;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;background-color:#00ff00;border-left-style:solid;border-bottom-width:1pt;width:75pt;border-top-color:#cccccc;border-bottom-style:solid}.c46{border-right-style:solid;padding:2pt 2pt 2pt 2pt;border-bottom-color:#cccccc;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:bottom;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;background-color:#00ff00;border-left-style:solid;border-bottom-width:1pt;width:75pt;border-top-color:#cccccc;border-bottom-style:solid}.c42{border-right-style:solid;padding:2pt 2pt 2pt 2pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:bottom;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:150pt;border-top-color:#000000;border-bottom-style:solid}.c12{border-right-style:solid;padding:2pt 2pt 2pt 2pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:bottom;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:84pt;border-top-color:#000000;border-bottom-style:solid}.c50{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#cccccc;border-top-width:1pt;border-right-width:0pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:75pt;border-top-color:#cccccc;border-bottom-style:solid}.c18{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:75pt;border-top-color:#000000;border-bottom-style:solid}.c34{border-right-style:solid;padding:2pt 2pt 2pt 2pt;border-bottom-color:#cccccc;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:bottom;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:144pt;border-top-color:#cccccc;border-bottom-style:solid}.c57{border-right-style:solid;padding:2pt 2pt 2pt 2pt;border-bottom-color:#cccccc;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:bottom;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:75pt;border-top-color:#cccccc;border-bottom-style:solid}.c65{border-right-style:solid;padding:2pt 2pt 2pt 2pt;border-bottom-color:#cccccc;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:bottom;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:75pt;border-top-color:#cccccc;border-bottom-style:solid}.c24{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:75pt;border-top-color:#000000;border-bottom-style:solid}.c36{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#cccccc;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#cccccc;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:75pt;border-top-color:#cccccc;border-bottom-style:solid}.c21{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:75pt;border-top-color:#000000;border-bottom-style:solid}.c56{border-right-style:solid;padding:2pt 2pt 2pt 2pt;border-bottom-color:#cccccc;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:bottom;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:144pt;border-top-color:#cccccc;border-bottom-style:solid}.c45{border-right-style:solid;padding:2pt 2pt 2pt 2pt;border-bottom-color:#cccccc;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:bottom;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:294pt;border-top-color:#cccccc;border-bottom-style:solid}.c19{border-right-style:solid;padding:2pt 2pt 2pt 2pt;border-bottom-color:#cccccc;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:bottom;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:75pt;border-top-color:#cccccc;border-bottom-style:solid}.c43{border-right-style:solid;padding:2pt 2pt 2pt 2pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:bottom;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:300pt;border-top-color:#000000;border-bottom-style:solid}.c31{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:75pt;border-top-color:#000000;border-bottom-style:solid}.c32{border-right-style:solid;padding:2pt 2pt 2pt 2pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:bottom;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:105.8pt;border-top-color:#000000;border-bottom-style:solid}.c11{border-right-style:solid;padding:2pt 2pt 2pt 2pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:bottom;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:75pt;border-top-color:#000000;border-bottom-style:solid}.c13{-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline;vertical-align:baseline;text-decoration-skip-ink:none;font-size:11pt;font-family:"Arial";font-style:normal}.c41{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:justify;height:11pt}.c6{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c44{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:"Arial";font-style:normal}.c39{color:#008200;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Courier New";font-style:normal}.c25{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Arial";font-style:normal}.c61{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:24pt;font-family:"Arial";font-style:normal}.c3{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Arial";font-style:normal}.c7{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c33{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:36pt;font-family:"Arial";font-style:normal}.c2{margin-left:18pt;padding-top:3pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c53{color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Arial";font-style:normal}.c8{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c38{padding-top:4pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c40{padding-top:10pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c62{margin-left:18pt;padding-top:3pt;padding-bottom:4pt;line-height:1.0;text-align:left}.c49{margin-left:36pt;padding-top:3pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c29{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;text-align:left}.c27{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;text-align:left}.c9{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left;height:11pt}.c14{padding-top:16pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;text-align:left}.c52{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:justify}.c37{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:center}.c54{border-spacing:0;border-collapse:collapse;margin-right:auto}.c26{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:right}.c15{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c30{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c17{color:#d35400;font-weight:700}.c10{color:inherit;text-decoration:inherit}.c48{margin-left:36pt;padding-left:0pt}.c55{padding:0;margin:0}.c47{orphans:2;widows:2}.c64{max-width:468pt;padding:72pt 72pt 72pt 72pt}.c5{color:#434f54}.c60{font-size:10pt}.c16{height:26pt}.c51{background-color:#ffffff}.c22{color:#5e6d03}.c58{height:11pt}.c1{color:#00979c}.c20{color:#95a5a6}.c0{height:15pt}.c67{font-size:11pt}.c63{color:#333333}.c28{color:#005c5f}.c23{color:#d35400}.c66{color:#f7981d}.c59{height:37pt}.c35{height:20pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c51 c64"><p class="c37 c47"><span class="c33">Team 17: CowShots</span></p><p class="c37 c47"><span class="c61">Oriana Peltzer, Qizhan Tam, </span></p><p class="c37 c47"><span class="c61">Sai Anurag, Shaun Harris</span></p><h1 class="c29 c35" id="h.cwn8nekmw88i"><span class="c44"></span></h1><h1 class="c29" id="h.km2o9ckdjmkn"><span class="c44">Contents</span></h1><p class="c38"><span class="c30"><a class="c10" href="#h.km2o9ckdjmkn">Contents</a></span></p><p class="c40"><span class="c30"><a class="c10" href="#h.o597b4jc8g94">1. Mechanical System</a></span></p><p class="c2"><span class="c30"><a class="c10" href="#h.junb7k77nsdi">1.1 Part Drawings</a></span></p><p class="c2"><span class="c30"><a class="c10" href="#h.oc1jdetywi1i">1.2 Design Basis</a></span></p><p class="c2"><span class="c30"><a class="c10" href="#h.crety6tkr2ix">1.3 Parts List and Datasheets</a></span></p><p class="c40"><span class="c30"><a class="c10" href="#h.ltpqqnm1trkj">2. Electrical</a></span></p><p class="c2"><span class="c30"><a class="c10" href="#h.hxndd3wytb3p">2.1 Schematic Drawings</a></span></p><p class="c49 c47"><span class="c30"><a class="c10" href="#h.tg9exa3c4c4i">2.1.1. System block Diagram</a></span></p><p class="c49 c47"><span class="c30"><a class="c10" href="#h.uy17f7mv8e3v">2.1.2 : Integration of battery, Teensy, Voltage Regulator</a></span></p><p class="c49 c47"><span class="c30"><a class="c10" href="#h.4d91k12p0hpg">2.1.3 Schematic: Beacon Sensing</a></span></p><p class="c49 c47"><span class="c30"><a class="c10" href="#h.q9cf8vgbkswa">2.1.4 : Schematic : IR Line Sensing</a></span></p><p class="c47 c49"><span class="c30"><a class="c10" href="#h.lq76kw7imzeb">2.1.5 Schematic: DC Motors Circuit</a></span></p><p class="c49 c47"><span class="c30"><a class="c10" href="#h.zenemngoq7a2">2.1.6 : Schematic Stepper Motor</a></span></p><p class="c2"><span class="c30"><a class="c10" href="#h.5b8bc4v52h6k">2.2 Design Basis</a></span></p><p class="c49 c47"><span class="c30"><a class="c10" href="#h.5nkjws1aiyxp">2.2.1 Digital Inputs - Digital Outputs Compatibility Study</a></span></p><p class="c49 c47"><span class="c30"><a class="c10" href="#h.z4bt7nadwmk1">2.2.2 Circuit Design Considerations - Teensy, Battery, Circuit breaker integration</a></span></p><p class="c40"><span class="c30"><a class="c10" href="#h.6q9nnu24n4o3">3. Software</a></span></p><p class="c2"><span class="c30"><a class="c10" href="#h.579hlthprm8k">3.1 State Space Diagram</a></span></p><p class="c2"><span class="c30"><a class="c10" href="#h.s6o1rmm7bmdc">3.2 Implementation</a></span></p><p class="c2"><span class="c30"><a class="c10" href="#h.mvbgfivo8ms2">3.3 The Motor.h header is shown here:</a></span></p><p class="c2"><span class="c30"><a class="c10" href="#h.z208j1e8mq6h">3.4 The Line_Sensing.h header is shown here:</a></span></p><p class="c2"><span class="c30"><a class="c10" href="#h.qduzq2k5ret5">3.5 The Line_Following.h header is shown here.</a></span></p><p class="c2"><span class="c30"><a class="c10" href="#h.ung2i6tktwnk">3.6 The State_Machine.h header is shown here.</a></span></p><p class="c2"><span class="c30"><a class="c10" href="#h.4gzppn95xeub">3.7 GlobalVariables.h header is shown here.</a></span></p><p class="c2"><span class="c30"><a class="c10" href="#h.a7jossa6dzez">3.8 LED_Blink.h header is shown here.</a></span></p><p class="c2"><span class="c30"><a class="c10" href="#h.dpekuhz4p6dz">3.9 Stepper.h header is shown here.</a></span></p><p class="c40"><span class="c30"><a class="c10" href="#h.jglsp4sn1qrk">4. Preliminary Test Results</a></span></p><p class="c40"><span class="c30"><a class="c10" href="#h.4fmum14w69jl">5. Design modifications</a></span></p><p class="c2"><span class="c30"><a class="c10" href="#h.dbrh0c6q8xhy">5.1 Completing the design</a></span></p><p class="c2"><span class="c30"><a class="c10" href="#h.ysbb2fvsjtoy">5.2 Issues encountered and solutions</a></span></p><p class="c47 c62"><span class="c30"><a class="c10" href="#h.r0m5s41q0tgu">5.3 Checkoff results</a></span></p><h1 class="c29" id="h.o597b4jc8g94"><span class="c44">1. Mechanical System</span></h1><h2 class="c27" id="h.junb7k77nsdi"><span class="c25">1.1 Part Drawings </span></h2><p class="c8"><span class="c7">Ball-Drop Mechanism</span></p><ol class="c55 lst-kix_vt9vab83cwkg-0 start" start="1"><li class="c8 c48"><span class="c7">Rotating Wheel</span></li></ol><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 386.50px; height: 208.76px;"><img alt="" src="images/image12.png" style="width: 386.50px; height: 208.76px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><ol class="c55 lst-kix_vt9vab83cwkg-0" start="2"><li class="c8 c48"><span class="c7">Slide</span></li></ol><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 500.54px; height: 361.50px;"><img alt="" src="images/image16.png" style="width: 500.54px; height: 385.55px; margin-left: 0.00px; margin-top: -12.02px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><ol class="c55 lst-kix_vt9vab83cwkg-0" start="3"><li class="c8 c48"><span class="c7">Rotating Wheel Holder</span></li></ol><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 552.50px; height: 572.41px;"><img alt="" src="images/image19.png" style="width: 552.50px; height: 572.41px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">Drive Mechanism</span></p><ol class="c55 lst-kix_3sq4fitor948-0 start" start="1"><li class="c8 c48"><span class="c7">Motor Fixtures</span></li></ol><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 314.50px; height: 248.21px;"><img alt="" src="images/image21.png" style="width: 314.50px; height: 248.21px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 317.71px; height: 273.50px;"><img alt="" src="images/image1.png" style="width: 317.71px; height: 273.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><ol class="c55 lst-kix_3sq4fitor948-0" start="2"><li class="c8 c48"><span class="c7">Drive Shaft Bearing Fixtures</span></li></ol><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 320.50px; height: 279.27px;"><img alt="" src="images/image18.png" style="width: 320.50px; height: 279.27px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c8"><span class="c7"><br>Platforms (Top &rarr; Bottom)</span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 426.04px; height: 457.50px;"><img alt="" src="images/image8.png" style="width: 426.04px; height: 457.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 368.87px; height: 404.50px;"><img alt="" src="images/image10.png" style="width: 368.87px; height: 404.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 398.99px; height: 433.50px;"><img alt="" src="images/image3.png" style="width: 398.99px; height: 433.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 425.61px; height: 478.50px;"><img alt="" src="images/image15.png" style="width: 425.61px; height: 478.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c25">1.1.1 Assembly Drawings</span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(3.14rad) translateZ(0px); -webkit-transform: rotate(3.14rad) translateZ(0px); width: 624.00px; height: 636.00px;"><img alt="" src="images/image17.png" style="width: 624.00px; height: 636.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 278.40px; height: 340.50px;"><img alt="" src="images/image14.png" style="width: 645.81px; height: 340.50px; margin-left: -201.82px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 308.00px; height: 278.00px;"><img alt="" src="images/image7.png" style="width: 527.81px; height: 278.00px; margin-left: -144.89px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><h2 class="c27" id="h.oc1jdetywi1i"><span>1.2 </span><span class="c25">Design Basis</span></h2><p class="c8"><span class="c7">Threaded rods were used to hold each platform in place as they provided sufficient strength for structural integrity and more importantly they allowed the flexibility for the platform heights to be adjusted quickly and also the ability for the robot to be designed in 2 large subsystems: the ball drop mechanism on the top and the drive mechanism on the bottom.</span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span>The ball drop mechanism was designed such that it was robust to potential shaking or variations in the balls. In contrast to using linear actuators to allow only a certain number of balls to drop using a quick timing linear actuator, using the stepper motor to rotate the ball wheel is easier to calibrate and is robust to uncertainties.</span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span>Press fi</span><span>ts were used to hold the drivetrain, motors and wheels in place as they ensured positioning precision and provided sufficient structural strength to prevent the drivetrain from exerting radial load on the motor output shaft. Among the alternatives considered were just gluing the supports in place which would greatly simplify the design process but the trade-off would be the positioning will be imprecise which may lead to the axial load on the motor output shafts and motor torque not transmitted inefficiently to the wheels. Fasteners using bolts would provide the greatest strength and precision but they would add complexity to the design process as tap holes would be required. We determined that the additional </span><span>strength </span><span class="c7">and precision provided by fasteners were unnecessary for the load that the drive shafts would be bearing. Spider couplers were used to interface the motor output shafts with the wheel shafts to act as a buffer against potential misalignments in the shafts&rsquo; concentricity. </span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span>The 2-wheel drive design was chosen for its simplicity, light-weight and low-cost design. It was compared against the 3/4-wheel (omniwheel) drive design which would make turning actions easier to implement but it would add additional failure modes to the robot by increasing circuitry complexity and it will also drastically increase (~+20%) the cost required to build the robot as the motors are the costliest components based on our design.</span></p><h2 class="c27" id="h.crety6tkr2ix"><span>1.3 </span><span class="c25">Parts List and Datasheets</span></h2><p class="c8"><span class="c30 c67"><a class="c10" href="https://www.google.com/url?q=https://docs.google.com/spreadsheets/d/1cyv70YhstdLAbBFwCzLZaKo1eI-3Omm2hXx2TTUBzww/edit%23gid%3D0&amp;sa=D&amp;ust=1520543035780000&amp;usg=AFQjCNFPCG4vtcnJd_5ZHYGEIRiipO2O3g">Parts List on Google Drive</a></span></p><p class="c6"><span class="c7"></span></p><a id="t.6de9c17c1d955b8f14410a37bcd724428d2ca8ab"></a><a id="t.0"></a><table class="c54"><tbody><tr class="c59"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">Part</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c15"><span class="c3">ID</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c15"><span class="c3">price</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c15"><span class="c3">Final Design Number of items</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c15"><span class="c3">Total Cost</span></p></td></tr><tr class="c0"><td class="c45" colspan="3" rowspan="1"><p class="c37"><span class="c3">In TA office</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">vex 2 wire motor 393</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 15.00</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">2</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 30.00</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">vex shaft 3 in</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 0.50</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">2</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 1.00</span></p></td></tr><tr class="c0"><td class="c56" colspan="1" rowspan="1"><p class="c15"><span class="c3">skateboard wheels to work with vex</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 3.65</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">2</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 7.30</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">Vex bearing flats</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 0.50</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">6</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 3.00</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">d shaft &frac14; by 6 in</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">634084</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c15"><span class="c3">$ 2.89</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">2</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 5.78</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">screw shaft &frac14; by 12 in</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 0.60</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">4</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 2.40</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">spider coupler hub 0.197 in</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 1.25</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">2</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 2.50</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">insert for spider mcmaster</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 1.50</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">1</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 1.50</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">Stepper motor</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c15"><span class="c3">42by48h07</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 6.25</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">1</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 6.25</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">Tamiya connector case</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 0.50</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">2</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 1.00</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">Tamiya metal crimp</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 0.25</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">4</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 1.00</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">Linear regulator</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c15"><span class="c3">LM338</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 1.50</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">2</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 3.00</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ -</span></p></td></tr><tr class="c0"><td class="c45" colspan="3" rowspan="1"><p class="c37"><span class="c3">Other</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ -</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">IR sensing</span></p></td><td class="c19 c51" colspan="1" rowspan="1"><p class="c15"><span class="c60 c63">OPB703</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 4.00</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">3</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 12.00</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">Polulu Ball Caster</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 2.99</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">1</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 2.99</span></p></td></tr><tr class="c0"><td class="c56" colspan="1" rowspan="1"><p class="c15"><span class="c3">Miscellaneous Nuts and Bolts from Ace Hardware</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 14.05</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">1</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 14.05</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ -</span></p></td></tr><tr class="c0"><td class="c45" colspan="3" rowspan="1"><p class="c37"><span class="c3">Lab Kit and provided</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ -</span></p></td></tr><tr class="c0"><td class="c56" colspan="1" rowspan="1"><p class="c15"><span class="c3">3000mAh Gens Ace 7.2V NiMH rechargaeble battery</span></p></td><td class="c65" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c46" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">2</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ -</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">Circuit Breaker</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">1</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ -</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">Teensy</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">1</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ -</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">IR phototransistor</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c15"><span class="c3">LTR-3208E</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 0.51</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">0</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ -</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">L293</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">0</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ -</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">DRV8825</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 10.00</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">1</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 10.00</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ -</span></p></td></tr><tr class="c0"><td class="c45" colspan="3" rowspan="1"><p class="c37"><span class="c3">Miscellaneous items</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ -</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">Top wheel</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 1.50</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">1</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 1.50</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">MDF</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 6.00</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">1</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 6.00</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">MDF</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 3.00</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">1</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 3.00</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">4 x 47Ohm resistors</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 0.20</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">1</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 0.20</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">Spyder coupler for D_shaft</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 1.25</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">1</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 1.25</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">zip ties for batteries</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 0.20</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">1</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 0.20</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">Slide and Stepper support</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 7.00</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">1</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 7.00</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c15"><span class="c3">Disfunctional Coupler</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 1.00</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">1</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 1.00</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26 c58"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ -</span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td></tr><tr class="c0"><td class="c34" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c15"><span class="c3">TOTAL</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c26"><span class="c3">$ 123.92</span></p></td></tr></tbody></table><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><h1 class="c29" id="h.ltpqqnm1trkj"><span>2. </span><span class="c44">Electrical </span></h1><h2 class="c27" id="h.hxndd3wytb3p"><span class="c25">2.1 Schematic Drawings</span></h2><p class="c6"><span class="c7"></span></p><h3 class="c14" id="h.tg9exa3c4c4i"><span class="c53">2.1.1. System block Diagram</span></h3><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">The whole system block diagram is shown here.</span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 576.00px; height: 418.00px;"><img alt="" src="images/image5.png" style="width: 576.00px; height: 418.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">The battery circuit will use a linear voltage regulator to regulate the voltage on the teensy, however, the motor voltage does not need to be regulated given the voltage range of the batteries in use. &nbsp;</span></p><h3 class="c14" id="h.uy17f7mv8e3v"><span class="c53">2.1.2 : Integration of battery, Teensy, Voltage Regulator</span></h3><p class="c6"><span class="c7"></span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 424.00px;"><img alt="" src="images/image20.png" style="width: 624.00px; height: 424.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><h3 class="c14" id="h.4d91k12p0hpg"><span class="c53">2.1.3 Schematic: Beacon Sensing</span></h3><p class="c8"><span>The IR beacon sensing diagram is shown here. &nbsp;This can have as many of these circuits in parallel as is required. &nbsp;This will be analyzed via trial and error. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 388.00px;"><img alt="" src="images/image22.png" style="width: 624.00px; height: 388.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h3 class="c14" id="h.q9cf8vgbkswa"><span class="c53">2.1.4 : Schematic : IR Line Sensing</span></h3><p class="c8"><span class="c7">The IR line following diagram is shown here. &nbsp;This will use at least 3 of these circuits in parallel, however, more can be used if found necessary. &nbsp;These configurations are similar to the circuits used in Lab 1.</span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 194.67px;"><img alt="" src="images/image9.png" style="width: 624.00px; height: 194.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h3 class="c14" id="h.lq76kw7imzeb"><span class="c53">2.1.5 Schematic: DC Motors Circuit</span></h3><p class="c8"><span class="c7">The motor circuit is shown here for the 2 DC motor. &nbsp; This is similar to the circuitry used in Lab 2.</span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 472.00px;"><img alt="" src="images/image11.png" style="width: 624.00px; height: 472.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h3 class="c14" id="h.zenemngoq7a2"><span class="c53">2.1.6 : Schematic Stepper Motor</span></h3><p class="c8"><span class="c7">The circuit for the stepper motor is shown here. &nbsp;This is also similar to the circuit found in Lab 2.</span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 334.67px;"><img alt="" src="images/image4.png" style="width: 624.00px; height: 334.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h2 class="c27" id="h.5b8bc4v52h6k"><span class="c25">2.2 Design Basis</span></h2><p class="c6"><span class="c7"></span></p><h3 class="c14" id="h.5nkjws1aiyxp"><span class="c53">2.2.1 Digital Inputs - Digital Outputs Compatibility Study</span></h3><p class="c8"><span class="c7">a) &nbsp;Teensy - input, L 293 - Output</span></p><p class="c8"><span class="c7">System Requirement: Control Motor Using Teensy</span></p><p class="c8"><span class="c7">Calculations</span></p><p class="c6"><span class="c7"></span></p><a id="t.e8e6c9a3e3724d2b5a504c53652f2512c4e89349"></a><a id="t.1"></a><table class="c54"><tbody><tr class="c0"><td class="c43" colspan="4" rowspan="1"><p class="c37"><span class="c3">Compatability - Teensy, L293</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td></tr><tr class="c0"><td class="c42" colspan="2" rowspan="1"><p class="c37"><span class="c3">Output</span></p></td><td class="c42" colspan="2" rowspan="1"><p class="c37"><span class="c3">Input</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Units</span></p></td></tr><tr class="c0"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Parameter</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Teensy</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Parameter</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">L293</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td></tr><tr class="c0"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">VOH</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">2.8</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">VIH</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">2.3</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">V</span></p></td></tr><tr class="c0"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">VOL</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">0.5</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">VIL</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">1.5</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">V</span></p></td></tr><tr class="c0"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">VOH&gt;VIH</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">YES</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">VOL&lt;VIL</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">YES</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">SAFE</span></p></td></tr></tbody></table><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">Since VOL&lt; VIL, VOH&gt; VIH, L293 can be used to control motor if Teensy microcontroller is used. &nbsp;It must be checked if L293 can sink the amount of desired current</span></p><p class="c8"><span class="c7">b) Teensy - input, DRV 8825 Output</span></p><p class="c8"><span class="c7">System Requirement: Control Stepper Motor Using Teensy</span></p><p class="c8"><span class="c7">Calculations</span></p><p class="c6"><span class="c7"></span></p><a id="t.532654d9f5367fb62b3e61aaa7d21fafc80672e2"></a><a id="t.2"></a><table class="c54"><tbody><tr class="c0"><td class="c43" colspan="4" rowspan="1"><p class="c37"><span class="c3">Compatability - Teensy, DRV8825</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td></tr><tr class="c0"><td class="c42" colspan="2" rowspan="1"><p class="c37"><span class="c3">Output</span></p></td><td class="c42" colspan="2" rowspan="1"><p class="c37"><span class="c3">Input</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Units</span></p></td></tr><tr class="c0"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Parameter</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Teensy</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Parameter</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">L293</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td></tr><tr class="c0"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">VOH</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">2.8</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">VIH</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">2.2</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">V</span></p></td></tr><tr class="c0"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">VOL</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">0.5</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">VIL</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">0.7</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">V</span></p></td></tr><tr class="c0"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">VOH&gt;VIH</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">YES</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">VOL&lt;VIL</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">YES</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">SAFE</span></p></td></tr></tbody></table><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">Since VOL&lt; VIL, VOH&gt; VIH, DRV8825 can be used to control motor if Teensy microcontroller is used. &nbsp;It must be checked if DRV8825 can sink the amount of desired current</span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">For line sensing and beacon sensing, analog inputs are used. The only user requirement is voltage being read must be readable by Teensy. Thus, any analog signal being read by Teensy must have a voltage signal less than 3.8 V</span></p><p class="c6"><span class="c7"></span></p><h3 class="c14" id="h.z4bt7nadwmk1"><span class="c53">2.2.2 Circuit Design Considerations - Teensy, Battery, Circuit breaker integration</span></h3><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">Teensy can have a maximum battery input voltage of 3.8 V. Voltage Regulator and potentiometer were used to ensure the same.</span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">Further, voltage regulator selected can allow a maximum current of 5A. At any time instant, the net current being drawn by the circuit must be less than 5A. If the net current drawn by motors (which draw the max load) is less than 80% of 5A, the circuit should be safe since other circuits draw little current. This point was taken into consideration during design phase</span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">2.2.3 Beacon Sensing Circuit</span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">&lt;Insert Text&gt;</span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">2.2.4 Line Sensing Circuit</span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">OPB 704 device is chosen for this application. It is a combination of a IR light emitting diode and npn photo transistor. The current that flows through the photo transistor is dependent on the surface upon which IR light is incident. Since it is an analog signal that is being tracked, the question of compatibility doesn&rsquo;t arise. The data sheet gave 40mA as an order of magnitude current that flows through the IR LED.</span></p><p class="c8"><span class="c7"><br>To ensure that this is the max current that flows through the LED, resistance was chosen. (In worst case scenario, voltage drop across diode is 0, i max = V teensy/ R). Standard Resistors 47 and 47 ohms were connected in series based on this calculation.</span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">The signal corresponding current through the photo transistor was measured by measuring the voltage drop that will occur over a resistor if the current flows through it. Resistor value was chosen accordingly so that the signal is of the order of magnitude of V.</span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">2.2.5 DC Motor Circuit</span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">User Requirements:</span></p><p class="c8"><span class="c7">a) Motors provide enough torque so that the robot overcomes static friction</span></p><p class="c8"><span class="c7">b) Motors provide enough torque at the desired speed</span></p><p class="c8"><span class="c7">c) Estimate the voltage required</span></p><p class="c8"><span class="c7">d) Estimate the max current/normal current for sink considerations</span></p><p class="c8"><span class="c7">e) Design the sink accordingly</span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">Motor Specifications</span></p><p class="c6"><span class="c7"></span></p><a id="t.c33ad6ca01071bfae78c7243fe39fd3124f00cb5"></a><a id="t.3"></a><table class="c54"><tbody><tr class="c16"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Motor Specs</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Jameco 161382</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">Units</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">Source</span></p></td></tr><tr class="c0"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Gear Ratio</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">30:1</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">Ratio</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">Datasheet</span></p></td></tr><tr class="c0"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">NL Speed</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">200</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">RPM</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">Datasheet</span></p></td></tr><tr class="c0"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Ke</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">0.5729577951</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">V/(rad/s)</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">Calculated</span></p></td></tr><tr class="c16"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">No Load Current</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">66</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">mA</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">Datasheet</span></p></td></tr><tr class="c0"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Rated Torque</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">850</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">gm-cm</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">Datasheet</span></p></td></tr><tr class="c0"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Rated Current</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">306</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">mA</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">Datasheet</span></p></td></tr><tr class="c0"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Kt</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">0.2722222222</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">Nm/A</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td></tr><tr class="c0"><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">R</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">6.451612903</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">Ohms</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c15"><span class="c3">Calculated</span></p></td></tr></tbody></table><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">Motor evaluation to check if it meets user demands</span></p><a id="t.4ec05e6b27d17c1c2405512287a0bac66c2dc5e1"></a><a id="t.4"></a><table class="c54"><tbody><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Weight</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">3</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Kg</span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Normal Force</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">29.4</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">N</span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Static Friction Factor</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">0.6</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">(Worst Case)</span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Rolling Friction Factor</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">0.047</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Static F Force</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">17.64</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">N</span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Wheel Size</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">4</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">inch Dia</span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Drive Stall Torque Calculation</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">No of motors</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">2</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Stall T per motor req</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">0.45</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Nm (Required)</span></p></td></tr><tr class="c16"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Stall T Actual Per Motor</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">0.49</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Nm</span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Rolling Friction Force</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">1.23</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">N</span></p></td></tr><tr class="c16"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Drive torque during motion</span></p></td><td class="c11 c51" colspan="1" rowspan="1"><p class="c26"><span class="c66">0.03</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">N m</span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Drive current</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">0.12</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Amps</span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Speed</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">0.20</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">m/s</span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Wheel Speed</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">4.00</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">rad/s</span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Back EMF</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">3.82</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">V</span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">NL EMF</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">0.43</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">V</span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Torque EMF</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">0.74</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">V</span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Total V</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">4.99</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">V</span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Is Total &lt; 12V?</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Yes</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c9"><span class="c3"></span></p></td></tr><tr class="c0"><td class="c32" colspan="1" rowspan="1"><p class="c15"><span class="c3">Max Starting Current</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c26"><span class="c3">1.794</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c15"><span class="c3">Amps</span></p></td></tr></tbody></table><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">Note:</span></p><p class="c8"><span>Rolling friction factor has been estimated using the information provided in this link - (</span><span class="c30 c60"><a class="c10" href="https://www.google.com/url?q=http://www.mhi.org/media/members/14220/130101690137732025.pdf&amp;sa=D&amp;ust=1520543035834000&amp;usg=AFQjCNFbMPLuoqDObYtjhgNVs14nHDs0pA">http://www.mhi.org/media/members/14220/130101690137732025.pdf</a></span><span class="c7">)</span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">Inferences:</span></p><ol class="c55 lst-kix_uh3o6z9stu0g-0 start" start="1"><li class="c8 c48"><span class="c7">The Motor can safely drive the system that has to be driven</span></li><li class="c8 c48"><span class="c7">The max starting current is 1.794A, the normal operating current is much less than 1A</span></li><li class="c8 c48"><span class="c7">L293 can sink an instantaneous current of 2A and a normal current of 1A. L293 can be used for this application.</span></li><li class="c8 c48"><span class="c7">The desired speed can be achieved using the 12V battery and PWM model.</span></li><li class="c8 c48"><span class="c7">Since the normal operating current is much less than 1 A, the voltage regulator is safe for use since it can take a max of 5 A.</span></li></ol><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">2.2.6 Stepper Motor Circuit</span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">The amount of torque required is extremely low. All it needs to push is a small ball. When the motor available in lab was run, it was observed that it can safely push the ball. The designers in the team believed that the application does not require modelling based thinking when heuristic experience is giving a clear signal and since the current/torque associated with the application is so small.</span></p><h1 class="c29" id="h.6q9nnu24n4o3"><span class="c44">3. Software </span></h1><h2 class="c27" id="h.579hlthprm8k"><span class="c25">3.1 State Space Diagram</span></h2><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 468.00px;"><img alt="" src="images/image2.png" style="width: 624.00px; height: 468.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c7"></span></p><h2 class="c27" id="h.s6o1rmm7bmdc"><span class="c25">3.2 Implementation</span></h2><p class="c8"><span class="c7">The current software presented here allows for a function to follow a line. &nbsp;This incorporates features of line sensing, and DC motor control. &nbsp;</span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">The main code is listed here:</span></p><p class="c8"><span class="c20">/*---------------Includes-----------------------------------*/</span><span><br></span><span class="c22">#include</span><span>&nbsp;</span><span class="c5">&lt;</span><span class="c23">IntervalTimer</span><span class="c5">.</span><span>h</span><span class="c5">&gt;</span><span><br></span><span class="c22">#include</span><span>&nbsp;</span><span class="c5">&lt;</span><span class="c17">AccelStepper</span><span class="c5">.</span><span>h</span><span class="c5">&gt;</span><span><br></span><span class="c22">#include</span><span>&nbsp;</span><span class="c5">&lt;</span><span class="c17">Metro</span><span class="c5">.</span><span>h</span><span class="c5">&gt;</span><span><br></span><span class="c22">#include</span><span>&nbsp;</span><span class="c28">&quot;GlobalVariables.h&quot;</span><span><br></span><span class="c5">// CowShots created header files</span><span><br></span><span class="c22">#include</span><span>&nbsp;</span><span class="c28">&quot;LED_Blink.h&quot;</span><span><br><br></span><span class="c22">#include</span><span>&nbsp;</span><span class="c28">&quot;Motor.h&quot;</span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">// functions to control the motor</span><span><br></span><span class="c22">#include</span><span>&nbsp;</span><span class="c28">&quot;Stepper.h&quot;</span><span><br><br></span><span class="c5">// global variables needed for both Line sensing and Line following</span><span><br></span><span class="c22">#include</span><span>&nbsp;</span><span class="c28">&quot;Line_Sensing.h&quot;</span><span>&nbsp; &nbsp;</span><span class="c5">// function to sense the line</span><span><br></span><span class="c22">#include</span><span>&nbsp;</span><span class="c28">&quot;Line_Following.h&quot;</span><span>&nbsp;</span><span class="c5">// function to follow the line</span><span><br></span><span class="c22">#include</span><span>&nbsp;</span><span class="c28">&quot;State_Machine.h&quot;</span><span><br><br></span><span class="c20">/*---------------Module Defines-----------------------------*/</span><span><br></span><span class="c5">// #define LIGHT_THRESHOLD 172 &nbsp;// trial and error thresholds</span><span><br></span><span class="c5">// #define LINE_THRESHOLD 10 &nbsp; &nbsp;// trial and error thresholds</span><span><br><br><br><br></span><span class="c20">/*---------------Module Function Prototypes-----------------*/</span><span><br></span><span class="c1">void</span><span>&nbsp;blink_LED();<br></span><span class="c1">void</span><span>&nbsp;Resp_to_key_motor(</span><span class="c1">char</span><span>);<br><br></span><span class="c20">/*---------------State Definitions--------------------------*/</span><span><br><br></span><span class="c20">/*---------------Module Variables---------------------------*/</span><span><br><br><br><br></span><span class="c20">/*---------------CowShots Main Functions----------------*/</span><span><br></span><span class="c1">void</span><span>&nbsp;</span><span class="c22">setup</span><span>() {<br> &nbsp;</span><span class="c5">// put your setup code here, to run once:</span><span><br> &nbsp;</span><span class="c23">pinMode</span><span>(ledPin</span><span class="c5">,</span><span class="c1">OUTPUT</span><span>);<br> &nbsp;</span><span class="c23">digitalWrite</span><span>(ledPin</span><span class="c5">,</span><span>ledState);<br> &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">begin</span><span>(9600);<br><br> &nbsp;Setup_LED_Blink();<br> &nbsp;Setup_Motor_Pins();<br> &nbsp;Setup_Line_Sensors();<br><br> &nbsp;</span><span class="c5">//Initialize actions for the first state</span><span><br> &nbsp;</span><span class="c5">//Setup_Line_Following();</span><span><br> &nbsp;Setup_Line_Following_PID();<br> &nbsp;</span><span class="c5">//GoForward();</span><span><br> &nbsp;</span><span class="c5">//state=STATE_TEST;</span><span><br> &nbsp;state </span><span class="c5">=</span><span>&nbsp;STATE_MOVE_TO_A;<br> &nbsp;</span><span class="c5">//state = STATE_STOP_AT_B;</span><span><br> &nbsp;</span><span class="c5">//state = STATE_MOVE_TO_TURN;</span><span><br><br> &nbsp;</span><span class="c5">//Setup_Line_Sampling_Print();</span><span><br> &nbsp;Setup_Stepper();<br>}<br><br></span><span class="c1">void</span><span>&nbsp;</span><span class="c22">loop</span><span>() {<br> &nbsp;</span><span class="c5">// put your main code here, to run repeatedly:</span><span><br> &nbsp;</span><span class="c22">if</span><span>&nbsp;(</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">available</span><span>()){<br> &nbsp; &nbsp;</span><span class="c1">char</span><span>&nbsp;key_serial_monitor </span><span class="c5">=</span><span>&nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">read</span><span>();<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(</span><span class="c28">&quot;Read in key: &quot;</span><span>);<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(key_serial_monitor);<br> &nbsp; &nbsp;Resp_to_key_motor(key_serial_monitor);<br> &nbsp;}<br> &nbsp;</span><span class="c5">//Follow_Line();</span><span><br> &nbsp;</span><span class="c5">//stepmotor.setSpeed(140);</span><span><br> &nbsp;</span><span class="c5">//stepmotor.runSpeed();</span><span><br> &nbsp;</span><span class="c22">switch</span><span>&nbsp;(state) {<br> &nbsp; &nbsp;</span><span class="c22">case</span><span>&nbsp;STATE_MOVE_TO_A</span><span class="c5">:</span><span><br> &nbsp; &nbsp; &nbsp;handleMoveToA();<br> &nbsp; &nbsp; &nbsp;</span><span class="c22">break</span><span>;<br> &nbsp; &nbsp;</span><span class="c22">case</span><span>&nbsp;STATE_STOP_AT_A</span><span class="c5">:</span><span><br> &nbsp; &nbsp; &nbsp;handleStopAtA();<br> &nbsp; &nbsp; &nbsp;</span><span class="c22">break</span><span>;<br> &nbsp; &nbsp;</span><span class="c22">case</span><span>&nbsp;STATE_MOVE_TO_PATENT_OFFICE</span><span class="c5">:</span><span><br> &nbsp; &nbsp; &nbsp;handleMoveToPatentOffice();<br> &nbsp; &nbsp; &nbsp;</span><span class="c22">break</span><span>;<br> &nbsp; &nbsp;</span><span class="c22">case</span><span>&nbsp;STATE_STOP_AT_PATENT_OFFICE</span><span class="c5">:</span><span><br> &nbsp; &nbsp; &nbsp;handleStopAtPatentOffice();<br> &nbsp; &nbsp; &nbsp;</span><span class="c22">break</span><span>;<br> &nbsp; &nbsp;</span><span class="c22">case</span><span>&nbsp;STATE_MOVE_TO_B</span><span class="c5">:</span><span><br> &nbsp; &nbsp; &nbsp;handleMoveToB();<br> &nbsp; &nbsp; &nbsp;</span><span class="c22">break</span><span>;<br> &nbsp; &nbsp;</span><span class="c22">case</span><span>&nbsp;STATE_STOP_AT_B</span><span class="c5">:</span><span><br> &nbsp; &nbsp; &nbsp;handleStopAtB();<br> &nbsp; &nbsp; &nbsp;</span><span class="c22">break</span><span>;<br> &nbsp; &nbsp;</span><span class="c22">case</span><span>&nbsp;STATE_MOVE_TO_TURN</span><span class="c5">:</span><span><br> &nbsp; &nbsp; &nbsp;handleMoveToTurn();<br> &nbsp; &nbsp; &nbsp;</span><span class="c22">break</span><span>;<br> &nbsp; &nbsp;</span><span class="c22">case</span><span>&nbsp;STATE_WAIT_FOR_TURN</span><span class="c5">:</span><span><br> &nbsp; &nbsp; &nbsp;handleWaitForTurn();<br> &nbsp; &nbsp; &nbsp;</span><span class="c22">break</span><span>;<br> &nbsp; &nbsp;</span><span class="c22">case</span><span>&nbsp;STATE_TAKE_A_TURN</span><span class="c5">:</span><span><br> &nbsp; &nbsp; &nbsp;handleTakeATurn();<br> &nbsp; &nbsp; &nbsp;</span><span class="c22">break</span><span>;<br> &nbsp; &nbsp;</span><span class="c22">case</span><span>&nbsp;STATE_MOVE_TO_GATE</span><span class="c5">:</span><span><br> &nbsp; &nbsp; &nbsp;handleMoveToGate();<br> &nbsp; &nbsp; &nbsp;</span><span class="c22">break</span><span>;<br> &nbsp; &nbsp;</span><span class="c22">case</span><span>&nbsp;STATE_STOP_AT_GATE</span><span class="c5">:</span><span><br> &nbsp; &nbsp; &nbsp;handleStopAtGate();<br> &nbsp; &nbsp; &nbsp;</span><span class="c22">break</span><span>;<br> &nbsp; &nbsp;</span><span class="c22">case</span><span>&nbsp;STATE_TEST</span><span class="c5">:</span><span><br> &nbsp; &nbsp; &nbsp;</span><span class="c22">break</span><span>;<br> &nbsp; &nbsp;</span><span class="c22">default</span><span class="c5">:</span><span>&nbsp; &nbsp; </span><span class="c5">// Should never get into an unhandled state</span><span><br> &nbsp; &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(</span><span class="c28">&quot;What is this I do not even...&quot;</span><span>);<br> &nbsp; &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(state);<br> &nbsp;}<br> &nbsp;stepmotor</span><span class="c5">.</span><span class="c23">run</span><span>();<br>}<br><br></span><span class="c20">/*----------------Module Functions--------------------------*/</span><span><br></span><span class="c1">void</span><span>&nbsp;Resp_to_key_motor(</span><span class="c1">char</span><span>&nbsp;a){<br> &nbsp;</span><span class="c22">if</span><span>&nbsp;(a</span><span class="c5">==</span><span class="c1">&#39;0&#39;</span><span>){<br> &nbsp; &nbsp;</span><span class="c5">//E1_state=LOW;</span><span><br> &nbsp; &nbsp;</span><span class="c5">//D1_state=LOW;</span><span><br> &nbsp; &nbsp;<br> &nbsp; &nbsp;state</span><span class="c5">=</span><span>STATE_TEST;<br> &nbsp; &nbsp;Line_Sampling_Timer</span><span class="c5">.</span><span class="c23">end</span><span>();<br> &nbsp; &nbsp;Motor_Stop();<br> &nbsp;}<br> &nbsp;</span><span class="c22">else</span><span>&nbsp;</span><span class="c22">if</span><span>&nbsp;(a</span><span class="c5">==</span><span class="c1">&#39;1&#39;</span><span>){</span><span class="c5">//direction 1</span><span><br> &nbsp; &nbsp;state</span><span class="c5">=</span><span>STATE_TEST;<br> &nbsp; &nbsp;GoBackwards();<br> &nbsp; &nbsp;<br> &nbsp;}<br> &nbsp;</span><span class="c22">else</span><span>&nbsp;</span><span class="c22">if</span><span>&nbsp;(a</span><span class="c5">==</span><span class="c1">&#39;2&#39;</span><span>){</span><span class="c5">//direction 2</span><span><br> &nbsp; &nbsp;GoForward();<br> &nbsp; &nbsp;state</span><span class="c5">=</span><span>STATE_TEST;<br><br> &nbsp;}<br> &nbsp;</span><span class="c22">else</span><span>&nbsp;</span><span class="c22">if</span><span>&nbsp;(a</span><span class="c5">==</span><span class="c1">&#39;s&#39;</span><span>){</span><span class="c5">// stepper motor go</span><span><br> &nbsp; &nbsp;</span><span class="c5">//runsteppermotor();</span><span><br> &nbsp; &nbsp;</span><span class="c5">//stepmotor.setSpeed(1400);</span><span><br> &nbsp; &nbsp;stepmotor</span><span class="c5">.</span><span class="c23">move</span><span>(10);<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(</span><span class="c28">&quot;Stepper Motor moved one&quot;</span><span>);<br> &nbsp;}<br> &nbsp;</span><span class="c22">else</span><span>&nbsp;</span><span class="c22">if</span><span>&nbsp;(a</span><span class="c5">==</span><span class="c1">&#39;c&#39;</span><span>){</span><span class="c5">// check if stepper motor is done</span><span><br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(</span><span class="c28">&quot;DistanceToGo = &quot;</span><span>);<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(stepmotor</span><span class="c5">.</span><span class="c23">distanceToGo</span><span>());<br> &nbsp;}<br> &nbsp;</span><span class="c22">else</span><span>&nbsp;</span><span class="c22">if</span><span>&nbsp;(a</span><span class="c5">==</span><span class="c1">&#39;l&#39;</span><span>){</span><span class="c5">// what is my line sensor 1 reading?</span><span><br> &nbsp; &nbsp;UpdateLineSensorValues();<br> &nbsp; &nbsp;Sensor_1_Color </span><span class="c5">=</span><span>&nbsp;Get_Color1(Sensor_1);<br> &nbsp; &nbsp;Sensor_2_Color </span><span class="c5">=</span><span>&nbsp;Get_Color(Sensor_2);<br> &nbsp; &nbsp;Sensor_3_Color </span><span class="c5">=</span><span>&nbsp;Get_Color(Sensor_3);<br><br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(</span><span class="c28">&quot;Your line sensor 1 is reading &quot;</span><span>);<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(Sensor_1_Color);<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(</span><span class="c28">&quot; &quot;</span><span>);<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(Sensor_1);<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(Sensor_2_Color);<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(</span><span class="c28">&quot; &quot;</span><span>);<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(Sensor_2);<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(Sensor_3_Color);<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(</span><span class="c28">&quot; &quot;</span><span>);<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(Sensor_3);<br> &nbsp;}<br> &nbsp;</span><span class="c22">else</span><span>&nbsp;</span><span class="c22">if</span><span>&nbsp;(a</span><span class="c5">==</span><span class="c1">&#39;t&#39;</span><span>){</span><span class="c5">// what state am I in?</span><span><br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(</span><span class="c28">&quot;You are in state = &quot;</span><span>);<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(state);<br> &nbsp;}<br> &nbsp;</span><span class="c22">else</span><span>&nbsp;</span><span class="c22">if</span><span>&nbsp;(a</span><span class="c5">==</span><span class="c1">&#39;r&#39;</span><span>){<br> &nbsp; &nbsp;</span><span class="c23">noInterrupts</span><span>();<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(</span><span class="c28">&quot;Correction = &quot;</span><span>);<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(correction);<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(</span><span class="c28">&quot;error = &quot;</span><span>);<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(error);<br> &nbsp; &nbsp;</span><span class="c23">interrupts</span><span>();<br> &nbsp;}<br> &nbsp;</span><span class="c22">else</span><span>{<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(</span><span class="c28">&quot;Key not recognized&quot;</span><span>);<br> &nbsp;}<br> &nbsp;</span><span class="c23">analogWrite</span><span>(E1</span><span class="c5">,</span><span>E1_state);<br> &nbsp;</span><span class="c23">digitalWrite</span><span>(D1</span><span class="c5">,</span><span>D1_state);<br> &nbsp;</span><span class="c23">analogWrite</span><span>(E2</span><span class="c5">,</span><span>E2_state);<br> &nbsp;</span><span class="c23">digitalWrite</span><span>(D2</span><span class="c5">,</span><span>D2_state);<br> &nbsp;</span><span class="c5">//Serial.print(&quot;digitalWrite &quot;);</span><span><br> &nbsp;</span><span class="c5">//Serial.print(E1_state);</span><span><br> &nbsp;</span><span class="c5">//Serial.print(&quot; &quot;);</span><span><br> &nbsp;</span><span class="c5">//Serial.println(D1_state);</span><span class="c7"><br>}<br></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><h2 class="c27" id="h.mvbgfivo8ms2"><span class="c25">3.3 The Motor.h header is shown here:</span></h2><p class="c8"><span class="c20">/*</span><span><br></span><span class="c20">&nbsp;* Functions to be used to output motor control</span><span><br></span><span class="c20">*/</span><span><br><br></span><span class="c5">// ---------------------- PINS ------------------------- //</span><span><br></span><span class="c1">int</span><span>&nbsp;E1 </span><span class="c5">=</span><span>&nbsp;20;<br></span><span class="c1">int</span><span>&nbsp;D1 </span><span class="c5">=</span><span>&nbsp;21;<br></span><span class="c1">int</span><span>&nbsp;D1_state </span><span class="c5">=</span><span>&nbsp;</span><span class="c1">LOW</span><span>;<br></span><span class="c1">int</span><span>&nbsp;E1_state </span><span class="c5">=</span><span>&nbsp;</span><span class="c1">LOW</span><span>;<br></span><span class="c1">int</span><span>&nbsp;E2 </span><span class="c5">=</span><span>&nbsp;23;<br></span><span class="c1">int</span><span>&nbsp;D2 </span><span class="c5">=</span><span>&nbsp;22;<br></span><span class="c1">int</span><span>&nbsp;D2_state </span><span class="c5">=</span><span>&nbsp;</span><span class="c1">LOW</span><span>;<br></span><span class="c1">int</span><span>&nbsp;E2_state </span><span class="c5">=</span><span>&nbsp;</span><span class="c1">LOW</span><span>;<br></span><span class="c5">// ----------------------------------------------------- //</span><span><br><br></span><span class="c1">int</span><span>&nbsp;DutyCycle </span><span class="c5">=</span><span>&nbsp;40; </span><span class="c5">//Our reference speed</span><span><br></span><span class="c1">int</span><span>&nbsp;Max_Speed </span><span class="c5">=</span><span>&nbsp;200; </span><span class="c5">//We use this to apply saturation</span><span><br></span><span class="c1">int</span><span>&nbsp;Right_Speed </span><span class="c5">=</span><span>&nbsp;DutyCycle;<br></span><span class="c1">int</span><span>&nbsp;Left_Speed </span><span class="c5">=</span><span>&nbsp;DutyCycle;<br></span><span class="c1">int</span><span>&nbsp;Right_Direction </span><span class="c5">=</span><span>&nbsp;</span><span class="c1">LOW</span><span>; </span><span class="c5">//These could eventually replace D1_state if it works out</span><span><br></span><span class="c1">int</span><span>&nbsp;Left_Direction </span><span class="c5">=</span><span>&nbsp;</span><span class="c1">LOW</span><span>;<br><br></span><span class="c5">// ------------------- SETUP MOTOR --------------------- //</span><span><br></span><span class="c1">void</span><span>&nbsp;Setup_Motor_Pins(</span><span class="c1">void</span><span>) {<br> &nbsp;</span><span class="c23">pinMode</span><span>(E1</span><span class="c5">,</span><span class="c1">OUTPUT</span><span>);<br> &nbsp;</span><span class="c23">pinMode</span><span>(D1</span><span class="c5">,</span><span class="c1">OUTPUT</span><span>);<br> &nbsp;</span><span class="c23">pinMode</span><span>(E2</span><span class="c5">,</span><span class="c1">OUTPUT</span><span>);<br> &nbsp;</span><span class="c23">pinMode</span><span>(D2</span><span class="c5">,</span><span class="c1">OUTPUT</span><span>);<br>}<br></span><span class="c5">// ----------------------------------------------------- //</span><span><br><br><br></span><span class="c5">// ----------------- Custom Moving --------------------- //</span><span><br></span><span class="c1">void</span><span>&nbsp;Advance(</span><span class="c1">void</span><span>) {<br> &nbsp;</span><span class="c5">//Serial.println(Left_Speed);</span><span><br> &nbsp;</span><span class="c5">//Serial.println(Right_Speed);</span><span><br> &nbsp;E1_state </span><span class="c5">=</span><span>&nbsp;Left_Speed;<br> &nbsp;D1_state</span><span class="c5">=</span><span>Left_Direction;<br> &nbsp;E2_state </span><span class="c5">=</span><span>&nbsp;Right_Speed;<br> &nbsp;D2_state</span><span class="c5">=</span><span>Right_Direction;<br> &nbsp;</span><span class="c23">analogWrite</span><span>(E1</span><span class="c5">,</span><span>E1_state);<br> &nbsp;</span><span class="c23">digitalWrite</span><span>(D1</span><span class="c5">,</span><span>D1_state);<br> &nbsp;</span><span class="c23">analogWrite</span><span>(E2</span><span class="c5">,</span><span>E2_state);<br> &nbsp;</span><span class="c23">digitalWrite</span><span>(D2</span><span class="c5">,</span><span>D2_state);<br>}<br><br></span><span class="c5">// ------------------------------------------------------ //</span><span><br><br></span><span class="c5">// ----------------- Elementary Moving ------------------ //</span><span><br><br></span><span class="c1">void</span><span>&nbsp;TurnRight(</span><span class="c1">void</span><span>) {<br> &nbsp; &nbsp;E1_state</span><span class="c5">=</span><span>38;<br> &nbsp; &nbsp;D1_state</span><span class="c5">=</span><span class="c1">LOW</span><span>;<br> &nbsp; &nbsp;E2_state</span><span class="c5">=</span><span>38;<br> &nbsp; &nbsp;D2_state</span><span class="c5">=</span><span class="c1">HIGH</span><span>;<br> &nbsp; &nbsp;</span><span class="c23">analogWrite</span><span>(E1</span><span class="c5">,</span><span>E1_state);<br> &nbsp; &nbsp;</span><span class="c23">digitalWrite</span><span>(D1</span><span class="c5">,</span><span>D1_state);<br> &nbsp; &nbsp;</span><span class="c23">analogWrite</span><span>(E2</span><span class="c5">,</span><span>E2_state);<br> &nbsp; &nbsp;</span><span class="c23">digitalWrite</span><span>(D2</span><span class="c5">,</span><span>D2_state);<br>}<br><br></span><span class="c1">void</span><span>&nbsp;Start_Pulse(</span><span class="c1">void</span><span>) {<br> &nbsp; &nbsp;E1_state</span><span class="c5">=</span><span>200;<br> &nbsp; &nbsp;D1_state</span><span class="c5">=</span><span class="c1">HIGH</span><span>;<br> &nbsp; &nbsp;E2_state</span><span class="c5">=</span><span>200;<br> &nbsp; &nbsp;D2_state</span><span class="c5">=</span><span class="c1">HIGH</span><span>;<br> &nbsp; &nbsp;</span><span class="c23">analogWrite</span><span>(E1</span><span class="c5">,</span><span>E1_state);<br> &nbsp; &nbsp;</span><span class="c23">digitalWrite</span><span>(D1</span><span class="c5">,</span><span>D1_state);<br> &nbsp; &nbsp;</span><span class="c23">analogWrite</span><span>(E2</span><span class="c5">,</span><span>E2_state);<br> &nbsp; &nbsp;</span><span class="c23">digitalWrite</span><span>(D2</span><span class="c5">,</span><span>D2_state);<br>}<br><br></span><span class="c1">void</span><span>&nbsp;GoBackwards(</span><span class="c1">void</span><span>) {<br> &nbsp; &nbsp;E1_state</span><span class="c5">=</span><span>DutyCycle;<br> &nbsp; &nbsp;D1_state</span><span class="c5">=</span><span class="c1">LOW</span><span>;<br> &nbsp; &nbsp;E2_state</span><span class="c5">=</span><span>DutyCycle;<br> &nbsp; &nbsp;D2_state</span><span class="c5">=</span><span class="c1">LOW</span><span>;<br> &nbsp; &nbsp;</span><span class="c23">analogWrite</span><span>(E1</span><span class="c5">,</span><span>E1_state);<br> &nbsp; &nbsp;</span><span class="c23">digitalWrite</span><span>(D1</span><span class="c5">,</span><span>D1_state);<br> &nbsp; &nbsp;</span><span class="c23">analogWrite</span><span>(E2</span><span class="c5">,</span><span>E2_state);<br> &nbsp; &nbsp;</span><span class="c23">digitalWrite</span><span>(D2</span><span class="c5">,</span><span>D2_state);<br>}<br><br></span><span class="c1">void</span><span>&nbsp;GoForward(</span><span class="c1">void</span><span>) {<br> &nbsp; &nbsp;E1_state</span><span class="c5">=</span><span>DutyCycle;<br> &nbsp; &nbsp;D1_state</span><span class="c5">=</span><span class="c1">HIGH</span><span>;<br> &nbsp; &nbsp;E2_state</span><span class="c5">=</span><span>DutyCycle</span><span class="c5">-</span><span>4;<br> &nbsp; &nbsp;D2_state</span><span class="c5">=</span><span class="c1">HIGH</span><span>;<br> &nbsp; &nbsp;</span><span class="c23">analogWrite</span><span>(E1</span><span class="c5">,</span><span>E1_state);<br> &nbsp; &nbsp;</span><span class="c23">digitalWrite</span><span>(D1</span><span class="c5">,</span><span>D1_state);<br> &nbsp; &nbsp;</span><span class="c23">analogWrite</span><span>(E2</span><span class="c5">,</span><span>E2_state);<br> &nbsp; &nbsp;</span><span class="c23">digitalWrite</span><span>(D2</span><span class="c5">,</span><span>D2_state);<br>}<br><br></span><span class="c1">void</span><span>&nbsp;Motor_Stop(</span><span class="c1">void</span><span>) {<br> &nbsp; &nbsp;E1_state</span><span class="c5">=</span><span class="c1">LOW</span><span>;<br> &nbsp; &nbsp;D1_state</span><span class="c5">=</span><span class="c1">LOW</span><span>;<br> &nbsp; &nbsp;E2_state</span><span class="c5">=</span><span class="c1">LOW</span><span>;<br> &nbsp; &nbsp;D2_state</span><span class="c5">=</span><span class="c1">LOW</span><span>;<br> &nbsp; &nbsp;</span><span class="c23">analogWrite</span><span>(E1</span><span class="c5">,</span><span>E1_state);<br> &nbsp; &nbsp;</span><span class="c23">digitalWrite</span><span>(D1</span><span class="c5">,</span><span>D1_state);<br> &nbsp; &nbsp;</span><span class="c23">analogWrite</span><span>(E2</span><span class="c5">,</span><span>E2_state);<br> &nbsp; &nbsp;</span><span class="c23">digitalWrite</span><span>(D2</span><span class="c5">,</span><span>D2_state);<br>}<br></span><span class="c5">// -------------------------------------------------------- //</span><span class="c7"><br></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><h2 class="c27" id="h.z208j1e8mq6h"><span class="c25">3.4 The Line_Sensing.h header is shown here:</span></h2><p class="c8"><span class="c20">/*</span><span><br></span><span class="c20">&nbsp;*Functions to be used for reading the IR sensors to follow the line.</span><span><br></span><span class="c20">&nbsp;*This includes reading the analog input to the Teensy from the IR sensors</span><span><br></span><span class="c20">*/</span><span><br><br><br></span><span class="c5">//Sensor pins</span><span><br></span><span class="c1">int</span><span>&nbsp;IR_SENSOR_READ_1 </span><span class="c5">=</span><span>&nbsp;14;<br></span><span class="c1">int</span><span>&nbsp;IR_SENSOR_READ_2 </span><span class="c5">=</span><span>&nbsp;15;<br></span><span class="c1">int</span><span>&nbsp;IR_SENSOR_READ_3 </span><span class="c5">=</span><span>&nbsp;16;<br><br></span><span class="c5">// Sensor values, between 0 and 1024</span><span><br></span><span class="c1">unsigned</span><span>&nbsp;</span><span class="c1">int</span><span>&nbsp;Sensor_1;<br></span><span class="c1">unsigned</span><span>&nbsp;</span><span class="c1">int</span><span>&nbsp;Sensor_2;<br></span><span class="c1">unsigned</span><span>&nbsp;</span><span class="c1">int</span><span>&nbsp;Sensor_3;<br><br><br><br></span><span class="c5">//Sensor Timer</span><span><br></span><span class="c23">IntervalTimer</span><span>&nbsp;Line_Sampling_Timer_Print;<br></span><span class="c1">int</span><span>&nbsp;sampling_rate_print </span><span class="c5">=</span><span>&nbsp;500; </span><span class="c5">//This is in ms so that we store it in smaller variable</span><span><br><br><br></span><span class="c5">// Some module function declarations here --------- //</span><span><br></span><span class="c1">void</span><span>&nbsp;UpdateLineSensorValues(</span><span class="c1">void</span><span>);<br></span><span class="c1">void</span><span>&nbsp;PrintLineSensorValues(</span><span class="c1">void</span><span>);<br></span><span class="c1">int</span><span>&nbsp;Get_Color(</span><span class="c1">int</span><span>&nbsp;Sensor_Value);<br></span><span class="c1">int</span><span>&nbsp;Get_Color1(</span><span class="c1">int</span><span>&nbsp;Sensor_Value);<br></span><span class="c5">// ------------------------------------------------ //</span><span><br><br><br></span><span class="c5">// --------------------- SETUP FUNCTIONS ------------------------ //</span><span><br></span><span class="c1">void</span><span>&nbsp;Setup_Line_Sensors(</span><span class="c1">void</span><span>) {<br> &nbsp;</span><span class="c23">pinMode</span><span>(IR_SENSOR_READ_1</span><span class="c5">,</span><span>&nbsp;</span><span class="c1">INPUT</span><span>);<br> &nbsp;</span><span class="c23">pinMode</span><span>(IR_SENSOR_READ_2</span><span class="c5">,</span><span>&nbsp;</span><span class="c1">INPUT</span><span>);<br> &nbsp;</span><span class="c23">pinMode</span><span>(IR_SENSOR_READ_3</span><span class="c5">,</span><span>&nbsp;</span><span class="c1">INPUT</span><span>);<br>}<br><br></span><span class="c1">void</span><span>&nbsp;Setup_Line_Sampling_Print(</span><span class="c1">void</span><span>) {<br> &nbsp; Line_Sampling_Timer_Print</span><span class="c5">.</span><span class="c23">begin</span><span>(PrintLineSensorValues</span><span class="c5">,</span><span>&nbsp;10000</span><span class="c5">*</span><span>sampling_rate_print);<br>}<br></span><span class="c1">void</span><span>&nbsp;Setup_Line_Sampling(</span><span class="c1">void</span><span>) {<br> &nbsp; Line_Sampling_Timer_Print</span><span class="c5">.</span><span class="c23">begin</span><span>(UpdateLineSensorValues</span><span class="c5">,</span><span>&nbsp;10</span><span class="c5">*</span><span>sampling_rate_print);<br>}<br><br></span><span class="c1">void</span><span>&nbsp;Stop_Line_Sampling(</span><span class="c1">void</span><span>) {<br> &nbsp; Line_Sampling_Timer_Print</span><span class="c5">.</span><span class="c23">end</span><span>();<br>}<br></span><span class="c5">// --------------------------------------------------------------- //</span><span><br><br><br></span><span class="c5">// ------------------ Read sensor values ------------------------- //</span><span><br></span><span class="c1">void</span><span>&nbsp;Read_IR_Sensor_1(</span><span class="c1">void</span><span>) {<br> &nbsp;Sensor_1 </span><span class="c5">=</span><span>&nbsp;</span><span class="c23">analogRead</span><span>(IR_SENSOR_READ_1);<br> &nbsp;Sensor_1_Color </span><span class="c5">=</span><span>&nbsp;Get_Color1(Sensor_1);<br> &nbsp;<br>}<br></span><span class="c1">void</span><span>&nbsp;Read_IR_Sensor_2(</span><span class="c1">void</span><span>) {<br> &nbsp;Sensor_2 </span><span class="c5">=</span><span>&nbsp;</span><span class="c23">analogRead</span><span>(IR_SENSOR_READ_2);<br> &nbsp;Sensor_2_Color </span><span class="c5">=</span><span>&nbsp;Get_Color(Sensor_2);<br>}<br></span><span class="c1">void</span><span>&nbsp;Read_IR_Sensor_3(</span><span class="c1">void</span><span>) {<br> &nbsp;Sensor_3 </span><span class="c5">=</span><span>&nbsp;</span><span class="c23">analogRead</span><span>(IR_SENSOR_READ_3);<br> &nbsp;Sensor_3_Color </span><span class="c5">=</span><span>&nbsp;Get_Color(Sensor_3);<br>}<br></span><span class="c5">// --------------------------------------------------------------- //</span><span><br><br><br></span><span class="c1">void</span><span>&nbsp;PrintLineSensorValues(</span><span class="c1">void</span><span>) {<br> &nbsp;Read_IR_Sensor_1();<br> &nbsp;Read_IR_Sensor_2();<br> &nbsp;Read_IR_Sensor_3();<br> &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>( </span><span class="c28">&quot;------------ LINE SENSING ----------------&quot;</span><span>);<br> &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(</span><span class="c28">&quot;Sensor 1 Value: &quot;</span><span>);<br> &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(Sensor_1);<br> &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(</span><span class="c28">&quot;Sensor 2 Value: &quot;</span><span>);<br> &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(Sensor_2);<br> &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(</span><span class="c28">&quot;Sensor 3 Value: &quot;</span><span>);<br> &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(Sensor_3);<br> &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(</span><span class="c28">&quot;-------------------------------------------&quot;</span><span>);<br> &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>();<br> &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(</span><span class="c28">&quot;Motor speeds &quot;</span><span>);<br> &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(Right_Speed);<br> &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(</span><span class="c28">&quot; - &quot;</span><span>);<br> &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">print</span><span>(Left_Speed);<br><br>}<br><br></span><span class="c1">void</span><span>&nbsp;UpdateLineSensorValues(</span><span class="c1">void</span><span>) {<br> &nbsp;Read_IR_Sensor_1();<br> &nbsp;Read_IR_Sensor_2();<br> &nbsp;Read_IR_Sensor_3();<br> &nbsp;</span><span class="c5">//Serial.println(Sensor_2);</span><span><br>}<br><br></span><span class="c5">// ------------------- Identify Color ----------------------- //</span><span><br></span><span class="c1">int</span><span>&nbsp;Get_Color(</span><span class="c1">int</span><span>&nbsp;Sensor_value) {<br> &nbsp;</span><span class="c5">//return map(Sensor_value, 0, 500, 0, 100);</span><span><br> &nbsp;</span><span class="c22">if</span><span>(Sensor_value </span><span class="c5">&lt;</span><span>&nbsp;150) {<br> &nbsp; &nbsp;</span><span class="c22">return</span><span>&nbsp;0; </span><span class="c5">//Black</span><span><br> &nbsp;}<br> &nbsp;</span><span class="c22">else</span><span>&nbsp;</span><span class="c22">if</span><span>&nbsp;(Sensor_value </span><span class="c5">&lt;</span><span>&nbsp;400) {<br> &nbsp; &nbsp;</span><span class="c22">return</span><span>&nbsp;1; </span><span class="c5">//Gray</span><span><br> &nbsp;}<br> &nbsp;</span><span class="c22">else</span><span>&nbsp;{<br> &nbsp; &nbsp;</span><span class="c22">return</span><span>&nbsp;2; </span><span class="c5">//White</span><span><br> &nbsp;}<br>}<br></span><span class="c1">int</span><span>&nbsp;Get_Color1(</span><span class="c1">int</span><span>&nbsp;Sensor_value) {<br> &nbsp;</span><span class="c5">//return map(Sensor_value, 0, 500, 0, 100);</span><span><br> &nbsp;</span><span class="c22">if</span><span>(Sensor_value </span><span class="c5">&lt;</span><span>&nbsp;100) {<br> &nbsp; &nbsp;</span><span class="c22">return</span><span>&nbsp;0; </span><span class="c5">//Black</span><span><br> &nbsp;}<br> &nbsp;</span><span class="c22">else</span><span>&nbsp;</span><span class="c22">if</span><span>&nbsp;(Sensor_value </span><span class="c5">&lt;</span><span>&nbsp;250) {<br> &nbsp; &nbsp;</span><span class="c22">return</span><span>&nbsp;1; </span><span class="c5">//Gray</span><span><br> &nbsp;}<br> &nbsp;</span><span class="c22">else</span><span>&nbsp;{<br> &nbsp; &nbsp;</span><span class="c22">return</span><span>&nbsp;2; </span><span class="c5">//White</span><span><br> &nbsp;}<br>}<br></span><span class="c5">// ----------------------------------------------------------- //</span><span class="c7"><br></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><h2 class="c27" id="h.qduzq2k5ret5"><span class="c25">3.5 The Line_Following.h header is shown here.</span></h2><p class="c8"><span class="c20">/* </span><span><br></span><span class="c20">&nbsp;* Functions to be used for following the Line, this needs functions from Line_Sensing.h</span><span><br></span><span class="c20">&nbsp;* But we don&#39;t need an extra include here. </span><span><br></span><span class="c20">*/</span><span><br><br></span><span class="c5">//Sensor 1 is on the left, sensor 2 is on the right</span><span><br><br></span><span class="c5">// ------------------ VARIABLES ----------------------- //</span><span><br></span><span class="c1">double</span><span>&nbsp;previous_error </span><span class="c5">=</span><span>&nbsp;0; </span><span class="c5">//For the D of PID</span><span><br></span><span class="c1">double</span><span>&nbsp;cumulated_error</span><span class="c5">=</span><span>0; </span><span class="c5">//For the I of PID</span><span><br></span><span class="c1">double</span><span>&nbsp;error </span><span class="c5">=</span><span>&nbsp;0;<br></span><span class="c1">double</span><span>&nbsp;correction </span><span class="c5">=</span><span>&nbsp;0;<br></span><span class="c1">double</span><span>&nbsp;correction_saturation</span><span class="c5">=</span><span>40.;<br><br></span><span class="c1">double</span><span>&nbsp;Kp </span><span class="c5">=</span><span>&nbsp;0.07; </span><span class="c5">//Gains</span><span><br></span><span class="c1">double</span><span>&nbsp;Kd </span><span class="c5">=</span><span>&nbsp;1.7;<br></span><span class="c1">double</span><span>&nbsp;Ki </span><span class="c5">=</span><span>&nbsp;0.00;<br><br></span><span class="c1">typedef</span><span>&nbsp;</span><span class="c1">enum</span><span>&nbsp;{<br> &nbsp; &nbsp;</span><span class="c1">LEFT</span><span class="c5">,</span><span>&nbsp;</span><span class="c1">RIGHT</span><span><br>} turn;<br>turn turn_Remember;<br><br><br></span><span class="c5">//In case we hit a gray or black turning tape we want to stop following line with an interrupt, using this for example</span><span><br></span><span class="c1">bool</span><span>&nbsp;Breaking_Event </span><span class="c5">=</span><span>&nbsp;0;<br></span><span class="c5">// ---------------------------------------------------- //</span><span><br><br></span><span class="c5">//Module Functions</span><span><br></span><span class="c1">void</span><span>&nbsp;Follow_Line(</span><span class="c1">void</span><span>);<br></span><span class="c1">void</span><span>&nbsp;Follow_Line_PID(</span><span class="c1">void</span><span>);<br></span><span class="c1">void</span><span>&nbsp;Reset_PID_vars(</span><span class="c1">void</span><span>);<br><br></span><span class="c5">// ------------------- TIMER -------------------------- //</span><span><br></span><span class="c5">// Timer we will use to read IR values and update motor speeds with PID</span><span><br></span><span class="c23">IntervalTimer</span><span>&nbsp;Line_Sampling_Timer;<br></span><span class="c23">IntervalTimer</span><span>&nbsp;Reset_PID_vars_Timer;<br></span><span class="c1">int</span><span>&nbsp;sampling_rate </span><span class="c5">=</span><span>&nbsp;1; </span><span class="c5">//in ms</span><span><br></span><span class="c5">// ---------------------------------------------------- //</span><span><br><br><br></span><span class="c5">// -------------------------- SETUP FUNCTIONS ---------------------------- //</span><span><br></span><span class="c1">void</span><span>&nbsp;Setup_Line_Following(</span><span class="c1">void</span><span>) {<br> &nbsp; Line_Sampling_Timer</span><span class="c5">.</span><span class="c23">begin</span><span>(Follow_Line</span><span class="c5">,</span><span>&nbsp;10</span><span class="c5">*</span><span>sampling_rate); </span><span class="c5">//10 micro</span><span><br>}<br></span><span class="c1">void</span><span>&nbsp;Setup_Line_Following_PID(</span><span class="c1">void</span><span>) {<br> &nbsp; Line_Sampling_Timer</span><span class="c5">.</span><span class="c23">begin</span><span>(Follow_Line_PID</span><span class="c5">,</span><span>&nbsp;5000</span><span class="c5">*</span><span>sampling_rate);<br> &nbsp; </span><span class="c5">//Reset_PID_vars_Timer.begin(Reset_PID_vars, 300000);</span><span><br> &nbsp; previous_error </span><span class="c5">=</span><span>&nbsp;save_previous_error; </span><span class="c5">//For the D of PID</span><span><br> &nbsp; cumulated_error </span><span class="c5">=</span><span>&nbsp;0; </span><span class="c5">//For the I of PID</span><span><br>}<br></span><span class="c5">// ----------------------------------------------------------------------- //</span><span><br><br></span><span class="c5">// -------------------------- END FUNCTIONS ---------------------------- //</span><span><br></span><span class="c1">void</span><span>&nbsp;Stop_Line_Following(</span><span class="c1">void</span><span>) {<br> &nbsp;Line_Sampling_Timer</span><span class="c5">.</span><span class="c23">end</span><span>();<br>}<br></span><span class="c1">void</span><span>&nbsp;Stop_Line_Following_PID(</span><span class="c1">void</span><span>) {<br> &nbsp;Line_Sampling_Timer</span><span class="c5">.</span><span class="c23">end</span><span>();<br> &nbsp;Reset_PID_vars_Timer</span><span class="c5">.</span><span class="c23">end</span><span>();<br> &nbsp;previous_error </span><span class="c5">=</span><span>&nbsp;0; </span><span class="c5">//For the D of PID</span><span><br> &nbsp;cumulated_error </span><span class="c5">=</span><span>&nbsp;0; </span><span class="c5">//For the I of PID</span><span><br>}<br></span><span class="c5">// ----------------------------------------------------------------------- //</span><span><br><br><br></span><span class="c1">void</span><span>&nbsp;Follow_Line_PID(</span><span class="c1">void</span><span>) {<br><br> &nbsp;</span><span class="c5">//Read the IR LED measurements</span><span><br> &nbsp;UpdateLineSensorValues();<br> &nbsp;<br> &nbsp;</span><span class="c5">//Sensor_1_Color = Get_Color1(Sensor_1);</span><span><br> &nbsp;</span><span class="c5">//Sensor_2_Color = Get_Color(Sensor_2);</span><span><br> &nbsp;</span><span class="c5">//Sensor_3_Color = Get_Color(Sensor_3);</span><span><br><br> &nbsp;</span><span class="c5">//Error calculation</span><span><br> &nbsp;previous_error </span><span class="c5">=</span><span>&nbsp;error;<br> &nbsp;</span><span class="c5">//error = Sensor_2_Color - Sensor_3_Color; //error is big if we are too far right, so we measure black on left (3) and white on right (2)</span><span><br> &nbsp;error</span><span class="c5">=</span><span>(</span><span class="c1">float</span><span>(Sensor_2)</span><span class="c5">-</span><span class="c1">float</span><span>(Sensor_3));<br> &nbsp;</span><span class="c22">if</span><span>&nbsp;(error </span><span class="c5">&gt;</span><span>&nbsp;0) {<br> &nbsp; &nbsp;error </span><span class="c5">*=</span><span>1.5;<br> &nbsp;}<br> &nbsp;cumulated_error </span><span class="c5">+=</span><span>&nbsp;error;<br><br> &nbsp;</span><span class="c5">//Saturation on cumulated error</span><span><br> &nbsp;</span><span class="c22">if</span><span>&nbsp;(cumulated_error</span><span class="c5">*</span><span>Ki </span><span class="c5">&gt;</span><span>&nbsp;10) {<br> &nbsp; &nbsp;cumulated_error </span><span class="c5">=</span><span>&nbsp;10.</span><span class="c5">/</span><span>Ki;<br> &nbsp;}<br> &nbsp;</span><span class="c22">else</span><span>&nbsp;</span><span class="c22">if</span><span>&nbsp;(cumulated_error</span><span class="c5">*</span><span>Ki </span><span class="c5">&lt;</span><span>&nbsp;</span><span class="c5">-</span><span>10) {<br> &nbsp; &nbsp;cumulated_error </span><span class="c5">=</span><span>&nbsp;</span><span class="c5">-</span><span>10.</span><span class="c5">/</span><span>Ki;<br> &nbsp;}<br><br> &nbsp;</span><span class="c5">//Correction calculation</span><span><br> &nbsp;correction </span><span class="c5">=</span><span>&nbsp;Kp</span><span class="c5">*</span><span>error </span><span class="c5">+</span><span>&nbsp;Ki</span><span class="c5">*</span><span>cumulated_error </span><span class="c5">+</span><span>&nbsp;Kd</span><span class="c5">*</span><span>(error</span><span class="c5">-</span><span>previous_error);<br><br> &nbsp;</span><span class="c5">//Saturation on correction</span><span><br> &nbsp;</span><span class="c22">if</span><span>&nbsp;(correction </span><span class="c5">&gt;</span><span>&nbsp;correction_saturation) {<br> &nbsp; &nbsp;correction </span><span class="c5">=</span><span>&nbsp;correction_saturation;<br> &nbsp;}<br> &nbsp;</span><span class="c22">else</span><span>&nbsp;</span><span class="c22">if</span><span>&nbsp;(correction </span><span class="c5">&lt;</span><span>&nbsp;</span><span class="c5">-</span><span>correction_saturation) {<br> &nbsp; &nbsp;correction </span><span class="c5">=</span><span>&nbsp;</span><span class="c5">-</span><span>correction_saturation;<br> &nbsp;}<br><br> &nbsp;</span><span class="c5">//Instead of keeping constant speed we will rather set the speeds slower:</span><span><br><br> &nbsp;</span><span class="c22">if</span><span>&nbsp;(correction </span><span class="c5">&gt;</span><span>&nbsp;0) { </span><span class="c5">//We want to turn left</span><span><br> &nbsp; &nbsp;Right_Speed </span><span class="c5">=</span><span>&nbsp;DutyCycle </span><span class="c5">+</span><span>&nbsp;correction</span><span class="c5">/</span><span>2.;<br> &nbsp; &nbsp;Left_Speed </span><span class="c5">=</span><span>&nbsp;DutyCycle </span><span class="c5">-</span><span>&nbsp;correction</span><span class="c5">/</span><span>2.;<br> &nbsp; &nbsp;Right_Direction </span><span class="c5">=</span><span>&nbsp;</span><span class="c1">LOW</span><span>;<br> &nbsp; &nbsp;Left_Direction </span><span class="c5">=</span><span>&nbsp;</span><span class="c1">LOW</span><span>;<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c5">//Set the directions in case left</span><span><br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(Left_Speed </span><span class="c5">&lt;</span><span>&nbsp;0) {<br> &nbsp; &nbsp; &nbsp;Left_Speed </span><span class="c5">=</span><span>&nbsp;DutyCycle</span><span class="c5">-</span><span>correction;<br> &nbsp; &nbsp; &nbsp;Left_Direction </span><span class="c5">=</span><span>&nbsp;</span><span class="c1">HIGH</span><span>;<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;<br> &nbsp;}<br> &nbsp;</span><span class="c22">else</span><span>&nbsp;{<br> &nbsp; &nbsp;Left_Speed </span><span class="c5">=</span><span>&nbsp;DutyCycle </span><span class="c5">-</span><span>&nbsp;correction</span><span class="c5">/</span><span>2.;<br> &nbsp; &nbsp;Right_Speed </span><span class="c5">=</span><span>&nbsp;DutyCycle </span><span class="c5">+</span><span>&nbsp;correction</span><span class="c5">/</span><span>2.;<br> &nbsp; &nbsp;Right_Direction </span><span class="c5">=</span><span>&nbsp;</span><span class="c1">LOW</span><span>;<br> &nbsp; &nbsp;Left_Direction </span><span class="c5">=</span><span>&nbsp;</span><span class="c1">LOW</span><span>;<br><br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(Right_Speed </span><span class="c5">&lt;</span><span>&nbsp;0) {<br> &nbsp; &nbsp; &nbsp;Right_Speed </span><span class="c5">=</span><span>&nbsp;</span><span class="c5">-</span><span>Right_Speed;<br> &nbsp; &nbsp; &nbsp;Right_Direction </span><span class="c5">=</span><span>&nbsp;</span><span class="c1">HIGH</span><span>;<br> &nbsp; &nbsp;}<br> &nbsp;}<br> &nbsp;</span><span class="c5">//Serial.println(Right_Speed);</span><span><br> &nbsp;</span><span class="c5">//Serial.println(correction);</span><span><br> &nbsp;Advance();<br> &nbsp;<br>}<br><br><br></span><span class="c1">void</span><span>&nbsp;Follow_Line(</span><span class="c1">void</span><span>) {<br> &nbsp;</span><span class="c1">int</span><span>&nbsp;change_dutyCycle</span><span class="c5">=</span><span>10;<br> &nbsp;</span><span class="c5">//Read the IR LED measurements</span><span><br> &nbsp;UpdateLineSensorValues();<br> &nbsp;<br> &nbsp;Sensor_1_Color </span><span class="c5">=</span><span>&nbsp;Get_Color1(Sensor_1);<br> &nbsp;Sensor_2_Color </span><span class="c5">=</span><span>&nbsp;Get_Color(Sensor_2);<br> &nbsp;Sensor_3_Color </span><span class="c5">=</span><span>&nbsp;Get_Color(Sensor_3);<br><br> &nbsp;<br> &nbsp;</span><span class="c5">//Apply saturation </span><span><br> &nbsp;</span><span class="c22">if</span><span>&nbsp;(Sensor_2_Color </span><span class="c5">==</span><span>&nbsp;2 </span><span class="c5">&amp;&amp;</span><span>&nbsp;Sensor_3_Color </span><span class="c5">==</span><span>&nbsp;2) {<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(turn_Remember </span><span class="c5">==</span><span>&nbsp;</span><span class="c1">RIGHT</span><span>){<br> &nbsp; &nbsp; &nbsp; &nbsp;Right_Speed </span><span class="c5">=</span><span>&nbsp;DutyCycle</span><span class="c5">-</span><span>change_dutyCycle;<br> &nbsp; &nbsp; &nbsp; &nbsp;Left_Speed </span><span class="c5">=</span><span>&nbsp;DutyCycle;<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c22">else</span><span>&nbsp;</span><span class="c22">if</span><span>&nbsp;(turn_Remember </span><span class="c5">==</span><span>&nbsp;</span><span class="c1">LEFT</span><span>){<br> &nbsp; &nbsp; &nbsp; &nbsp;Right_Speed </span><span class="c5">=</span><span>&nbsp;DutyCycle;<br> &nbsp; &nbsp; &nbsp; &nbsp;Left_Speed </span><span class="c5">=</span><span>&nbsp;DutyCycle </span><span class="c5">-</span><span>&nbsp;change_dutyCycle;<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c5">//Right_Speed = DutyCycle;</span><span><br> &nbsp; &nbsp;</span><span class="c5">//Left_Speed = DutyCycle;</span><span><br> &nbsp; &nbsp;</span><span class="c5">//Serial.println(0);</span><span><br> &nbsp;} </span><span class="c22">else</span><span>&nbsp;</span><span class="c22">if</span><span>&nbsp;(Sensor_2_Color </span><span class="c5">==</span><span>&nbsp;0){<br> &nbsp; &nbsp;Right_Speed </span><span class="c5">=</span><span>&nbsp;DutyCycle </span><span class="c5">-</span><span>&nbsp;change_dutyCycle;<br> &nbsp; &nbsp;Left_Speed </span><span class="c5">=</span><span>&nbsp;DutyCycle;<br> &nbsp; &nbsp;turn_Remember</span><span class="c5">=</span><span class="c1">RIGHT</span><span>;<br> &nbsp; &nbsp;</span><span class="c5">//Serial.println(1);</span><span><br> &nbsp;} </span><span class="c22">else</span><span>&nbsp;</span><span class="c22">if</span><span>&nbsp;(Sensor_3_Color </span><span class="c5">==</span><span>&nbsp;0){<br> &nbsp; &nbsp;Right_Speed </span><span class="c5">=</span><span>&nbsp;DutyCycle;<br> &nbsp; &nbsp;Left_Speed </span><span class="c5">=</span><span>&nbsp;DutyCycle </span><span class="c5">-</span><span>&nbsp;change_dutyCycle;<br> &nbsp; &nbsp;turn_Remember</span><span class="c5">=</span><span class="c1">LEFT</span><span>;<br> &nbsp; &nbsp;</span><span class="c5">//Serial.println(2);</span><span><br> &nbsp;}<br> &nbsp;</span><span class="c22">else</span><span>{<br> &nbsp; &nbsp; &nbsp;</span><span class="c5">//Serial.println(&quot;Something is wrong in applying saturation&quot;);</span><span><br> &nbsp;}<br> &nbsp;</span><span class="c5">//Run the motor</span><span><br><br> &nbsp;save_previous_error </span><span class="c5">=</span><span>&nbsp;previous_error;<br> &nbsp;<br> &nbsp;Advance();<br> &nbsp;<br>}<br><br></span><span class="c1">void</span><span>&nbsp;Reset_PID_vars(</span><span class="c1">void</span><span>) {<br> &nbsp;cumulated_error </span><span class="c5">=</span><span>&nbsp;0;<br> &nbsp;previous_error </span><span class="c5">=</span><span class="c7">&nbsp;0;<br>}<br></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c39"></span></p><h2 class="c27" id="h.ung2i6tktwnk"><span class="c25">3.6 The State_Machine.h header is shown here.</span></h2><p class="c8"><span class="c5">// variables and flags</span><span><br></span><span class="c1">bool</span><span>&nbsp;resp_To_Gray_Happened</span><span class="c5">=</span><span class="c1">false</span><span>;<br></span><span class="c1">bool</span><span>&nbsp;resp_Move_Stepper_Motor</span><span class="c5">=</span><span class="c1">false</span><span>;<br></span><span class="c1">bool</span><span>&nbsp;TakeATurnHappened</span><span class="c5">=</span><span class="c1">false</span><span>;<br></span><span class="c5">// State machine</span><span><br></span><span class="c1">typedef</span><span>&nbsp;</span><span class="c1">enum</span><span>&nbsp;{<br> &nbsp; &nbsp;STATE_MOVE_TO_A</span><span class="c5">,</span><span><br> &nbsp; &nbsp;STATE_STOP_AT_A</span><span class="c5">,</span><span><br> &nbsp; &nbsp;STATE_MOVE_TO_PATENT_OFFICE</span><span class="c5">,</span><span><br> &nbsp; &nbsp;STATE_STOP_AT_PATENT_OFFICE</span><span class="c5">,</span><span><br> &nbsp; &nbsp;STATE_MOVE_TO_B</span><span class="c5">,</span><span><br> &nbsp; &nbsp;STATE_STOP_AT_B</span><span class="c5">,</span><span><br> &nbsp; &nbsp;STATE_MOVE_TO_TURN</span><span class="c5">,</span><span><br> &nbsp; &nbsp;STATE_WAIT_FOR_TURN</span><span class="c5">,</span><span><br> &nbsp; &nbsp;STATE_TAKE_A_TURN</span><span class="c5">,</span><span><br> &nbsp; &nbsp;STATE_MOVE_TO_GATE</span><span class="c5">,</span><span><br> &nbsp; &nbsp;STATE_STOP_AT_GATE</span><span class="c5">,</span><span><br> &nbsp; &nbsp;STATE_TEST</span><span class="c5">,</span><span><br>} States_t;<br><br></span><span class="c5">// State variable</span><span><br>States_t state;<br><br></span><span class="c5">// Function declarations</span><span><br></span><span class="c1">void</span><span>&nbsp;handleMoveToA();<br></span><span class="c1">void</span><span>&nbsp;handleStopAtA();<br></span><span class="c1">void</span><span>&nbsp;handleMoveToPatentOffice();<br></span><span class="c1">void</span><span>&nbsp;handleStopAtPatentOffice();<br></span><span class="c1">void</span><span>&nbsp;handleMoveToB();<br></span><span class="c1">void</span><span>&nbsp;handleStopAtB();<br></span><span class="c1">void</span><span>&nbsp;handleMoveToTurn();<br></span><span class="c1">void</span><span>&nbsp;handleWaitForTurn();<br></span><span class="c1">void</span><span>&nbsp;handleTakeATurn();<br></span><span class="c1">void</span><span>&nbsp;handleMoveToGate();<br></span><span class="c1">void</span><span>&nbsp;handleStopAtGate();<br><br></span><span class="c5">// Resp function declarations</span><span><br></span><span class="c1">void</span><span>&nbsp;Resp_to_Gray();<br><br><br></span><span class="c5">// Function Definitions</span><span><br></span><span class="c1">void</span><span>&nbsp;handleMoveToA(){<br> &nbsp; &nbsp;</span><span class="c23">noInterrupts</span><span>();<br> &nbsp; &nbsp;</span><span class="c1">int</span><span>&nbsp;Sensor_1_Color_Copy </span><span class="c5">=</span><span>&nbsp;Sensor_1_Color;<br> &nbsp; &nbsp;</span><span class="c23">interrupts</span><span>();<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(Sensor_1_Color_Copy </span><span class="c5">==</span><span>&nbsp;1){</span><span class="c5">// if gray detected on far right sensor</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;Resp_to_Gray();<br> &nbsp; &nbsp; &nbsp; &nbsp;resp_To_Gray_Happened</span><span class="c5">=</span><span class="c1">true</span><span>;<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(resp_To_Gray_Happened </span><span class="c5">&amp;&amp;</span><span>&nbsp;metroTimer</span><span class="c5">.</span><span class="c23">check</span><span>()){<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">//Line_Sampling_Timer.end(); // stop line following</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;Stop_Line_Following_PID();<br> &nbsp; &nbsp; &nbsp; &nbsp;Motor_Stop(); </span><span class="c5">// stop motor</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;state </span><span class="c5">=</span><span>&nbsp;STATE_STOP_AT_A;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(</span><span class="c28">&quot;state set to STATE_STOP_AT_A&quot;</span><span>);<br> &nbsp; &nbsp; &nbsp; &nbsp;resp_To_Gray_Happened</span><span class="c5">=</span><span class="c1">false</span><span>;<br> &nbsp; &nbsp;}<br>}<br></span><span class="c1">void</span><span>&nbsp;handleStopAtA(){<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(resp_Move_Stepper_Motor</span><span class="c5">==</span><span class="c1">false</span><span>){<br> &nbsp; &nbsp; &nbsp; &nbsp;Move_Stepper_Motor();<br> &nbsp; &nbsp; &nbsp; &nbsp;resp_Move_Stepper_Motor</span><span class="c5">=</span><span class="c1">true</span><span>;<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;Run_Stepper_Motor();<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(stepmotor</span><span class="c5">.</span><span class="c23">distanceToGo</span><span>() </span><span class="c5">==</span><span>&nbsp;0){<br> &nbsp; &nbsp; &nbsp; &nbsp;Setup_Line_Following_PID();<br> &nbsp; &nbsp; &nbsp; &nbsp;state </span><span class="c5">=</span><span>&nbsp;STATE_MOVE_TO_PATENT_OFFICE;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(</span><span class="c28">&quot;state set to STATE_MOVE_TO_PATENT_OFFICE&quot;</span><span>);<br> &nbsp; &nbsp; &nbsp; &nbsp;resp_Move_Stepper_Motor</span><span class="c5">=</span><span class="c1">false</span><span>;<br> &nbsp; &nbsp;}<br>}<br></span><span class="c1">void</span><span>&nbsp;handleMoveToPatentOffice(){<br> &nbsp; &nbsp;</span><span class="c23">noInterrupts</span><span>();<br> &nbsp; &nbsp;</span><span class="c1">int</span><span>&nbsp;Sensor_1_Color_Copy </span><span class="c5">=</span><span>&nbsp;Sensor_1_Color;<br> &nbsp; &nbsp;</span><span class="c23">interrupts</span><span>();<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(Sensor_1_Color_Copy </span><span class="c5">==</span><span>&nbsp;1){</span><span class="c5">// if gray detected on far right sensor</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;Resp_to_Gray();<br> &nbsp; &nbsp; &nbsp; &nbsp;resp_To_Gray_Happened</span><span class="c5">=</span><span class="c1">true</span><span>;<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(resp_To_Gray_Happened </span><span class="c5">&amp;&amp;</span><span>&nbsp;metroTimer</span><span class="c5">.</span><span class="c23">check</span><span>()){<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">//Line_Sampling_Timer.end(); // stop line following</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;Stop_Line_Following_PID();<br> &nbsp; &nbsp; &nbsp; &nbsp;Motor_Stop(); </span><span class="c5">// stop motor</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;state </span><span class="c5">=</span><span>&nbsp;STATE_STOP_AT_PATENT_OFFICE;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(</span><span class="c28">&quot;state set to STATE_STOP_AT_PATENT_OFFICE&quot;</span><span>);<br> &nbsp; &nbsp; &nbsp; &nbsp;resp_To_Gray_Happened</span><span class="c5">=</span><span class="c1">false</span><span>;<br> &nbsp; &nbsp;}<br>}<br></span><span class="c1">void</span><span>&nbsp;handleStopAtPatentOffice(){<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(resp_Move_Stepper_Motor</span><span class="c5">==</span><span class="c1">false</span><span>){<br> &nbsp; &nbsp; &nbsp; &nbsp;Move_Stepper_Motor();<br> &nbsp; &nbsp; &nbsp; &nbsp;resp_Move_Stepper_Motor</span><span class="c5">=</span><span class="c1">true</span><span>;<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;Run_Stepper_Motor();<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(stepmotor</span><span class="c5">.</span><span class="c23">distanceToGo</span><span>() </span><span class="c5">==</span><span>&nbsp;0){<br> &nbsp; &nbsp; &nbsp; &nbsp;Setup_Line_Following_PID();<br> &nbsp; &nbsp; &nbsp; &nbsp;state </span><span class="c5">=</span><span>&nbsp;STATE_MOVE_TO_B;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(</span><span class="c28">&quot;state set to STATE_MOVE_TO_B&quot;</span><span>);<br> &nbsp; &nbsp; &nbsp; &nbsp;resp_Move_Stepper_Motor</span><span class="c5">=</span><span class="c1">false</span><span>;<br><br> &nbsp; &nbsp;}<br>}<br></span><span class="c1">void</span><span>&nbsp;handleMoveToB(){<br> &nbsp; &nbsp;</span><span class="c23">noInterrupts</span><span>();<br> &nbsp; &nbsp;</span><span class="c1">int</span><span>&nbsp;Sensor_1_Color_Copy </span><span class="c5">=</span><span>&nbsp;Sensor_1_Color;<br> &nbsp; &nbsp;</span><span class="c23">interrupts</span><span>();<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(Sensor_1_Color_Copy </span><span class="c5">==</span><span>&nbsp;1){</span><span class="c5">// if gray detected on far right sensor</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;Resp_to_Gray();<br> &nbsp; &nbsp; &nbsp; &nbsp;resp_To_Gray_Happened</span><span class="c5">=</span><span class="c1">true</span><span>;<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(resp_To_Gray_Happened </span><span class="c5">&amp;&amp;</span><span>&nbsp;metroTimer</span><span class="c5">.</span><span class="c23">check</span><span>()){<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">//Line_Sampling_Timer.end(); // stop line following</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;Stop_Line_Following_PID();<br> &nbsp; &nbsp; &nbsp; &nbsp;Motor_Stop(); </span><span class="c5">// stop motor</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;state </span><span class="c5">=</span><span>&nbsp;STATE_STOP_AT_B;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(</span><span class="c28">&quot;state set to STOP_AT_B&quot;</span><span>);<br> &nbsp; &nbsp; &nbsp; &nbsp;resp_To_Gray_Happened</span><span class="c5">=</span><span class="c1">false</span><span>;<br> &nbsp; &nbsp;}<br>}<br></span><span class="c1">void</span><span>&nbsp;handleStopAtB(){<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(resp_Move_Stepper_Motor</span><span class="c5">==</span><span class="c1">false</span><span>){<br> &nbsp; &nbsp; &nbsp; &nbsp;Move_Stepper_Motor();<br> &nbsp; &nbsp; &nbsp; &nbsp;resp_Move_Stepper_Motor</span><span class="c5">=</span><span class="c1">true</span><span>;<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;Run_Stepper_Motor();<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(stepmotor</span><span class="c5">.</span><span class="c23">distanceToGo</span><span>() </span><span class="c5">==</span><span>&nbsp;0){<br> &nbsp; &nbsp; &nbsp; &nbsp;Setup_Line_Following_PID();<br> &nbsp; &nbsp; &nbsp; &nbsp;state </span><span class="c5">=</span><span>&nbsp;STATE_MOVE_TO_TURN;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(</span><span class="c28">&quot;state set to MOVE_TO_TURN&quot;</span><span>);<br> &nbsp; &nbsp; &nbsp; &nbsp;resp_Move_Stepper_Motor</span><span class="c5">=</span><span class="c1">false</span><span>;<br> &nbsp; &nbsp;}<br>}<br></span><span class="c1">void</span><span>&nbsp;handleMoveToTurn(){<br> &nbsp;</span><span class="c23">noInterrupts</span><span>();<br> &nbsp;Sensor_1_Color </span><span class="c5">=</span><span>&nbsp;Get_Color1(Sensor_1);<br> &nbsp;</span><span class="c23">interrupts</span><span>();<br><br> &nbsp;</span><span class="c22">if</span><span>&nbsp;(Sensor_1_Color </span><span class="c5">==</span><span>&nbsp;0) {<br> &nbsp; &nbsp;</span><span class="c5">//Line_Sampling_Timer.end();</span><span><br> &nbsp; &nbsp;Stop_Line_Following_PID();<br> &nbsp; &nbsp;</span><span class="c5">//Setup_Line_Sampling;</span><span><br> &nbsp; &nbsp;</span><span class="c5">//TurnRight();</span><span><br> &nbsp; &nbsp;metroTimer</span><span class="c5">.</span><span class="c23">interval</span><span>(timer_WaitForTurn);<br> &nbsp; &nbsp;metroTimer</span><span class="c5">.</span><span class="c23">reset</span><span>();<br> &nbsp; &nbsp;state </span><span class="c5">=</span><span>&nbsp;STATE_WAIT_FOR_TURN;<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(</span><span class="c28">&quot;state set to WAIT_FOR_TURN&quot;</span><span>);<br> &nbsp;}<br>}<br></span><span class="c1">void</span><span>&nbsp;handleWaitForTurn() {<br> &nbsp;</span><span class="c22">if</span><span>&nbsp;(metroTimer</span><span class="c5">.</span><span class="c23">check</span><span>() </span><span class="c5">==</span><span>&nbsp;1) {<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;TurnRight();<br> &nbsp; &nbsp;save_previous_error </span><span class="c5">=</span><span>&nbsp;0;<br> &nbsp; &nbsp;state </span><span class="c5">=</span><span>&nbsp;STATE_TAKE_A_TURN;<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(</span><span class="c28">&quot;state set to TAKE_A_TURN&quot;</span><span>);<br> &nbsp;}<br>}<br></span><span class="c1">void</span><span>&nbsp;handleTakeATurn(){<br> &nbsp;<br> &nbsp;UpdateLineSensorValues();<br> &nbsp;</span><span class="c23">noInterrupts</span><span>();<br> &nbsp;Sensor_2_Color </span><span class="c5">=</span><span>&nbsp;Get_Color(Sensor_2);<br> &nbsp;</span><span class="c23">interrupts</span><span>();<br><br> &nbsp;</span><span class="c22">if</span><span>&nbsp;(Sensor_2_Color </span><span class="c5">==</span><span>&nbsp;0) {<br> &nbsp; &nbsp;</span><span class="c5">//Stop_Line_Sampling();</span><span><br> &nbsp; &nbsp;</span><span class="c5">//DutyCycle=43;</span><span><br> &nbsp; &nbsp;DutyCycle</span><span class="c5">=</span><span>25;<br> &nbsp; &nbsp;Setup_Line_Following_PID();<br> &nbsp; &nbsp;state </span><span class="c5">=</span><span>&nbsp;STATE_MOVE_TO_GATE;<br> &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(</span><span class="c28">&quot;state set to MOVE_TO_GATE&quot;</span><span>);<br> &nbsp; &nbsp;</span><span class="c5">//Motor_Stop();</span><span><br> &nbsp; &nbsp;metroTimer</span><span class="c5">.</span><span class="c23">interval</span><span>(timer_gray);<br> &nbsp; &nbsp;metroTimer</span><span class="c5">.</span><span class="c23">reset</span><span>();<br> &nbsp; &nbsp;metroPostTurn</span><span class="c5">.</span><span class="c23">interval</span><span>(timer_PostTurn);<br> &nbsp; &nbsp;metroPostTurn</span><span class="c5">.</span><span class="c23">reset</span><span>();<br> &nbsp;}<br> &nbsp;<br>}<br></span><span class="c1">void</span><span>&nbsp;handleMoveToGate(){<br> &nbsp; &nbsp;</span><span class="c5">//UpdateLineSensorValues();</span><span><br> &nbsp; &nbsp;</span><span class="c23">noInterrupts</span><span>();<br> &nbsp; &nbsp;</span><span class="c1">int</span><span>&nbsp;Sensor_1_Color_Copy </span><span class="c5">=</span><span>&nbsp;Sensor_1_Color;<br> &nbsp; &nbsp;</span><span class="c23">interrupts</span><span>();<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(DutyCycle</span><span class="c5">&lt;</span><span>40 </span><span class="c5">&amp;&amp;</span><span>&nbsp;metroPostTurn</span><span class="c5">.</span><span class="c23">check</span><span>()){<br> &nbsp; &nbsp; &nbsp;DutyCycle</span><span class="c5">++</span><span>;<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(TakeATurnHappened</span><span class="c5">==</span><span class="c1">false</span><span>&nbsp;</span><span class="c5">&amp;&amp;</span><span>&nbsp;metroTimer</span><span class="c5">.</span><span class="c23">check</span><span>()){<br> &nbsp; &nbsp; &nbsp; TakeATurnHappened</span><span class="c5">=</span><span class="c1">true</span><span>;<br> &nbsp; &nbsp; &nbsp; </span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(</span><span class="c28">&quot;TakeATurnHappened&quot;</span><span>);<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(resp_To_Gray_Happened</span><span class="c5">==</span><span class="c1">false</span><span>&nbsp;</span><span class="c5">&amp;&amp;</span><span>&nbsp;TakeATurnHappened </span><span class="c5">&amp;&amp;</span><span>&nbsp;Sensor_1_Color_Copy </span><span class="c5">==</span><span>&nbsp;0){</span><span class="c5">// if black detected on far right sensor</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;metroTimer</span><span class="c5">.</span><span class="c23">interval</span><span>(timer_PastBlackGate);</span><span class="c5">//Resp_to_Gray();</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;metroTimer</span><span class="c5">.</span><span class="c23">reset</span><span>();<br> &nbsp; &nbsp; &nbsp; &nbsp;resp_To_Gray_Happened</span><span class="c5">=</span><span class="c1">true</span><span>;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(</span><span class="c28">&quot;RespToGrayHappened&quot;</span><span>);<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c22">if</span><span>&nbsp;(TakeATurnHappened </span><span class="c5">&amp;&amp;</span><span>&nbsp;resp_To_Gray_Happened </span><span class="c5">&amp;&amp;</span><span>&nbsp;metroTimer</span><span class="c5">.</span><span class="c23">check</span><span>()){<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">//Line_Sampling_Timer.end(); // stop line following</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;Stop_Line_Following_PID();<br> &nbsp; &nbsp; &nbsp; &nbsp;Motor_Stop(); </span><span class="c5">// stop motor</span><span><br> &nbsp; &nbsp; &nbsp; &nbsp;state </span><span class="c5">=</span><span>&nbsp;STATE_STOP_AT_GATE;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c17">Serial</span><span class="c5">.</span><span class="c23">println</span><span>(</span><span class="c28">&quot;state set to STOP_AT_GATE&quot;</span><span>);<br> &nbsp; &nbsp; &nbsp; &nbsp;resp_To_Gray_Happened</span><span class="c5">=</span><span class="c1">false</span><span>;<br> &nbsp; &nbsp;}<br>}<br></span><span class="c1">void</span><span>&nbsp;handleStopAtGate(){<br>}<br><br><br></span><span class="c5">// Resp Function Definitions</span><span><br></span><span class="c1">void</span><span>&nbsp;Resp_to_Gray(){</span><span class="c5">// end LineFollow</span><span><br> &nbsp; &nbsp;metroTimer</span><span class="c5">.</span><span class="c23">interval</span><span>(timer_gray);<br> &nbsp; &nbsp;metroTimer</span><span class="c5">.</span><span class="c23">reset</span><span class="c7">(); &nbsp; &nbsp;<br>}<br><br><br></span></p><p class="c6"><span class="c7"></span></p><h2 class="c27" id="h.4gzppn95xeub"><span class="c25">3.7 GlobalVariables.h header is shown here.</span></h2><p class="c8"><span class="c20">/* </span><span><br></span><span class="c20">&nbsp;* Global Variables to be used for every header .h file.</span><span><br></span><span class="c20">&nbsp;*</span><span><br></span><span class="c20">*/</span><span><br></span><span class="c5">// Global Includes</span><span><br></span><span class="c1">int</span><span>&nbsp;timer_gray </span><span class="c5">=</span><span>&nbsp;300; </span><span class="c5">// in milliseconds</span><span><br></span><span class="c5">//int timer_stepper = 2000; // in milliseconds</span><span><br></span><span class="c5">//int timer_pulse = 10; //in milliseconds</span><span><br></span><span class="c1">int</span><span>&nbsp;timer_WaitForTurn</span><span class="c5">=</span><span>200;<br></span><span class="c1">int</span><span>&nbsp;timer_PostTurn </span><span class="c5">=</span><span>&nbsp;200;<br></span><span class="c1">int</span><span>&nbsp;timer_PastBlackGate </span><span class="c5">=</span><span>&nbsp;1000;<br></span><span class="c1">double</span><span>&nbsp;save_previous_error</span><span class="c5">=</span><span>0;<br></span><span class="c5">//IntervalTimer little_Timer;</span><span><br></span><span class="c17">Metro</span><span>&nbsp;metroTimer </span><span class="c5">=</span><span>&nbsp;</span><span class="c17">Metro</span><span>(timer_gray);<br></span><span class="c17">Metro</span><span>&nbsp;metroPostTurn </span><span class="c5">=</span><span>&nbsp;</span><span class="c17">Metro</span><span>(timer_PostTurn);<br></span><span class="c5">//Metro pulseTimer = Metro(timer_pulse);</span><span><br><br></span><span class="c1">int</span><span>&nbsp;Sensor_1_Color;<br></span><span class="c1">int</span><span>&nbsp;Sensor_2_Color;<br></span><span class="c1">int</span><span class="c7">&nbsp;Sensor_3_Color;<br></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><h2 class="c27" id="h.a7jossa6dzez"><span class="c25">3.8 LED_Blink.h header is shown here.</span></h2><p class="c8"><span class="c5">// onboard LED</span><span><br></span><span class="c1">int</span><span>&nbsp;ledState</span><span class="c5">=</span><span class="c1">LOW</span><span>;<br></span><span class="c1">int</span><span>&nbsp;ledPin</span><span class="c5">=</span><span>13;<br><br></span><span class="c23">IntervalTimer</span><span>&nbsp;myTimer_LED;<br><br><br></span><span class="c1">void</span><span>&nbsp;blink_LED(){<br> &nbsp;</span><span class="c22">if</span><span>&nbsp;(ledState</span><span class="c5">==</span><span class="c1">LOW</span><span>) ledState</span><span class="c5">=</span><span class="c1">HIGH</span><span>;<br> &nbsp;</span><span class="c22">else</span><span>&nbsp;ledState</span><span class="c5">=</span><span class="c1">LOW</span><span>;<br> &nbsp;</span><span class="c23">digitalWrite</span><span>(ledPin</span><span class="c5">,</span><span>ledState);<br> &nbsp;</span><span class="c5">//Serial.println(&quot;blink_LED called&quot;);</span><span><br>}<br></span><span class="c1">void</span><span>&nbsp;Setup_LED_Blink(){<br> &nbsp;myTimer_LED</span><span class="c5">.</span><span class="c23">begin</span><span>(blink_LED</span><span class="c5">,</span><span class="c7">1000000);<br>}<br></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><h2 class="c27" id="h.dpekuhz4p6dz"><span class="c25">3.9 Stepper.h header is shown here.</span></h2><p class="c8"><span class="c20">/*---------------Module Variables---------------------------*/</span><span><br></span><span class="c17">AccelStepper</span><span>&nbsp;stepmotor(1</span><span class="c5">,</span><span>&nbsp;3</span><span class="c5">,</span><span>&nbsp;4); </span><span class="c5">// pin 3 = step, pin 4 = direction</span><span><br></span><span class="c1">int</span><span>&nbsp;distance </span><span class="c5">=</span><span>&nbsp;10;<br><br></span><span class="c1">void</span><span>&nbsp;Setup_Stepper(</span><span class="c1">void</span><span>) {<br> &nbsp; &nbsp;stepmotor</span><span class="c5">.</span><span class="c23">setMaxSpeed</span><span>(40);<br>}<br><br></span><span class="c1">void</span><span>&nbsp;Move_Stepper_Motor(</span><span class="c1">void</span><span>) {<br> &nbsp; &nbsp;stepmotor</span><span class="c5">.</span><span class="c23">move</span><span>(distance);<br>}<br></span><span class="c1">void</span><span>&nbsp;Run_Stepper_Motor(){<br> &nbsp; &nbsp;stepmotor</span><span class="c5">.</span><span class="c23">run</span><span class="c7">();<br>}<br></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c39"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span>This link is to the GitHub repository for the software for this project. </span></p><p class="c8"><span class="c30"><a class="c10" href="https://www.google.com/url?q=https://github.com/srharris91/ME210_CowShots.git&amp;sa=D&amp;ust=1520543035869000&amp;usg=AFQjCNEHtDRjedsMMau0irVK3VMKGNnlNw">https://github.com/srharris91/ME210_CowShots.git</a></span></p><p class="c6"><span class="c7"></span></p><h1 class="c29" id="h.jglsp4sn1qrk"><span class="c44">4. Preliminary Test Results </span></h1><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 350.67px;"><img alt="" src="images/image13.jpg" style="width: 624.00px; height: 350.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c8"><span class="c7">The line sensors and motors work as intended. Initial testing was conducted on the line following capabilities of the robot. The robot oscillates and runs off the line soon after starting.</span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">The beacon detectors have not been tested yet as the main focus currently is to achieve the check-off requirements.</span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><h1 class="c29" id="h.4fmum14w69jl"><span class="c44">5. Design modifications</span></h1><h2 class="c27" id="h.dbrh0c6q8xhy"><span class="c25">5.1 Completing the design</span></h2><p class="c52 c47"><span class="c7">We have implemented the ball dropping mechanism on our robot. Our first prototype was made with a plateau consisting of layers of pink foam surrounding the ball bearing, that we placed around a shaft. Spider couplers now make the link in between the shaft and rotating wheel. </span></p><p class="c52 c47"><span>Our final plateau design consisted of layers of laser-cut duron, pressfit around the bearing and enabling the slide to be inserted inside in a stable way. Nuts and bolts enable stability and placement of the upper plateau layer at an adjustable height.</span></p><h2 class="c27" id="h.ysbb2fvsjtoy"><span class="c25">5.2 Issues encountered and solutions</span></h2><p class="c52 c47"><span class="c7">While constructing our robot, we have met the following issues which led to changes in our initial design:</span></p><ul class="c55 lst-kix_ys2y86ka8ojv-0 start"><li class="c52 c48 c47"><span class="c7">Unstable electric wires: these would easily come off. We soldered most of our wires to headers to create a stronger link to the breadboard.</span></li></ul><ul class="c55 lst-kix_u5i3t61dchl3-0 start"><li class="c52 c48 c47"><span class="c7">Uncapability to tune the line following controller properly: the slow time response of the motors lead to amplifying oscillations. Moreover, slowing down the robot would have been tricky to implement since the initial speed required to counter friction forces is larger than the speed generating oscillations. Our main solution for this problem was to change the motors, and remove the spider couplers.</span></li><li class="c48 c47 c52"><span class="c7">Robot often banging into the wall (due to the oscillations). To take less risk, we moved the line sensors from centered to the right of the robot. We now move at a safe distance from the wall.</span></li><li class="c52 c48 c47"><span class="c7">Non repeatability of our robot&rsquo;s behavior. In fact, our motor&rsquo;s input voltage came straight from the batteries, and our PID tuning had to change with time. To solve this we added a 12V voltage regulator, which was immediately effective</span></li></ul><p class="c41"><span class="c7"></span></p><p class="c41"><span class="c7"></span></p><p class="c41"><span class="c7"></span></p><p class="c41"><span class="c7"></span></p><p class="c41"><span class="c7"></span></p><p class="c41"><span class="c7"></span></p><p class="c41"><span class="c7"></span></p><p class="c41"><span class="c7"></span></p><p class="c41"><span class="c7"></span></p><h2 class="c27" id="h.r0m5s41q0tgu"><span class="c25">5.3 Checkoff results</span></h2><p class="c6"><span class="c7"></span></p><p class="c37 c47"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 311.00px; height: 318.99px;"><img alt="" src="images/image6.png" style="width: 311.00px; height: 518.07px; margin-left: 0.00px; margin-top: -88.74px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">Our new robot design led to a repeatable and convenient behavior, which brought us to checkoff successfully. </span></p><p class="c6"><span class="c7"></span></p><p class="c8"><span class="c7">Here is the link to watch our robot in action!</span></p><p class="c6"><span class="c7"></span></p><p class="c37 c47"><span class="c30"><a class="c10" href="https://www.google.com/url?q=https://youtu.be/0EHYUA8m4A4&amp;sa=D&amp;ust=1520543035871000&amp;usg=AFQjCNG5QzW1y78r6pYMyHAYULVz2QeqzQ">https://youtu.be/0EHYUA8m4A4</a></span></p><p class="c6"><span class="c7"></span></p><div><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p><p class="c6"><span class="c7"></span></p></div></body>



    </div>
</div>





<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
    if (mySidebar.style.display === 'block') {
        mySidebar.style.display = 'none';
        overlayBg.style.display = "none";
    } else {
        mySidebar.style.display = 'block';
        overlayBg.style.display = "block";
    }
}

// Close the sidebar with the close button
function w3_close() {
    mySidebar.style.display = "none";
    overlayBg.style.display = "none";
}
</script>

</body>
</html>

